WILEY.define("wiley-article",function(){}),WILEY.define("configuration/add-this",[],function(){"use strict";var t="ra-51225be51b56b4c4";return{id:t,url:"//s7.addthis.com/js/300/addthis_widget.js#pubid="+t}}),WILEY.define("modules/alt-metrics",["common/modules/jquery-loader","common/modules/events","common/facades/pubsub"],function(t,e,i){"use strict";var o=function(e){this.element=t(e),this.setEvents()};return o.prototype={getMetrics:function(){t.getScript("https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js")},setEvents:function(){var o=e.categories;i.subscribe(o.state.on,t.proxy(this.setAlignment,this)),i.subscribe(o.app.start,t.proxy(this.getMetrics,this))},setAlignment:function(e){var i=/xxs/.test(e)?"bottom":"right";window._altmetric&&this.element.attr("data-badge-popover")!==i&&(this.element.attr("data-badge-popover",i),t(".altmetric-embed.popover").hide().remove(),this.element.empty().removeAttr("data-uuid"),window._altmetric.badges={},window._altmetric_embed_init())}},o}),WILEY.define("modules/article-nav",["common/modules/jquery-loader","common/modules/utilities","common/facades/pubsub","common/utilities/dom","common/utilities/ie","common/facades/scrollable"],function(t,e,i,o,n){"use strict";var s,r=t("#article-nav"),a=r.parents(".article-tools__list"),l=r.children(".article-tools__article-nav-scrollpane"),c=t(".js-journal"),h=t(".footer--wiley"),d=t(".footer--hub, .clib-footer"),u=o.get(window),f=r.find(".icon__chevron"),m=t("#article-nav-menu"),p=m.next(".js-icon__tools--article-nav"),g=m.find(".article-tools__item-link-text"),v={active:"article-tools__article-nav-item-link--is-active",chevron:"icon__chevron--visible",hidden:"is-hidden",item:"article-tools__article-nav-item",link:"article-tools__article-nav-item-link",navigation:"article-tools__item-link-text--active",section:"article-tools__article-section--is-active"},b=(function(){var e=0;return h.each(function(){e+=Math.round(t(this).outerHeight(!0))}),e}(),!1),_=function(){var t,e,i,o=r.find("."+v.active),n=l.scrollable("isScrollable");n&&o.length?(t=o.position().top+o.outerHeight(),i=parseInt(l.css("height"),10),e=Math.abs(parseInt(l.scrollable("content").css("top"),10)),(t<e||t>i+e)&&l.scrollable("scroll",o)):n&&!o.length&&0===u.scrollTop()&&l.scrollable("scroll",0)},w=function(){l.scrollable("destroy")},y=function(t){w(),l.css(t),l.clearQueue(),l.queue(function(){l.scrollable(),_()})},k=function(){var i,n,r=u.height(),l=["application.ready","resizing","scrolling.finished","accordion.slideUp.complete"],f=d.length>0?e.isInViewport(d):e.isInViewport(h),m=(o.get("#js-article-tools"),80);e.getDockHeightInViewM()&&"default"===s?(f?(b||this&&t.inArray(this.event,l)>-1)&&(b=!1):b||(b=!0),i=r-130):(n=Math.round(c.offset().top)+parseInt(a.css("marginTop"),10),i=r-(n+m)+t(window).scrollTop(),b=!1),i&&y({"max-height":i}),x()},x=function(){var i,n,r=(u.height(),o.get("#js-article-tools")),a=d.length>0?d.outerHeight():0,l=d.length>0?e.isInViewport(d):e.isInViewport(h),c=d.length>0?d.offset().top:h.offset().top,f=20,m=t(document).height()-t(window).scrollTop()-t(window).height();e.getDockHeightInViewM()&&"default"===s&&l&&r.outerHeight()>c-t(window).scrollTop()?(i=h.outerHeight()+a-m+f,n="auto"):(i="",n=""),r.css({bottom:i,top:n})},C=function(o){s="default",this.root=t(o),this.model=this.articleNavModel(),this.scrollDuration=1500,this.animationDuration=500,this.fromClick=!1,this.clickedElm=null;var a=this,c=function(e){s=e,"panel"===s?(r.addClass(v.hidden),m.off("click").on("click",t.proxy(a.togglePanel,a))):(m.off("click"),r.removeClass(v.hidden),w(),l.removeAttr("style"),k())},h=function(){p.hide(),g.removeClass(v.navigation),f.removeClass(v.chevron).removeAttr("style"),r.addClass(v.hidden).removeAttr("style"),e.bodyClick(!1,"click.articleNav touchstart.articleNav")},d=function(t){var e="panel"===t?"default":"panel";s===e&&h(),c(t)},u=function(e){var i,o=t(e.target).attr("href");if(o){for(a.fromClick=!0,i=0;i<a.model.length;i++)a.model[i].id===o.replace(/^#/,"")&&(a.clickedElm=a.model[i]);a.setMenuItem(a.clickedElm)}};i.subscribe({"scrolling.finished":function(){a.setMenuItem(a.getViewportElement())},"application.ready":k,resizing:k,"state.match":function(t){var e="unsubscribe",o="panel";/l/.test(t)&&(e="subscribe",o="default"),d(o),i[e]("scrolling.finished",k),i[e]("accordion.slideUp.complete",k),i[e]("scrolling",x)}}),r.on("click",u),n.is(8)||t(".article-footer").on("click",".js-footer-control",u)};return C.prototype={togglePanel:function(i){var o=this;i&&i.preventDefault(),r.hasClass(v.hidden)?(g.addClass(v.navigation),p.fadeIn(o.animationDuration),r.fadeIn(o.animationDuration,function(){r.removeClass(v.hidden),y({height:150}),b=!1,e.bodyClick(!0,"click.articleNav touchstart.articleNav",function(e){var i=t(e.target);0!==i.closest("#article-nav").length||i.is("#article-nav")||o.togglePanel()})})):(p.hide(),g.removeClass(v.navigation),r.fadeOut(o.animationDuration,function(){r.removeAttr("style").addClass(v.hidden),e.bodyClick(!1,"click.articleNav touchstart.articleNav")}))},setMenuItem:function(){var e;return function(i){if(!i||!i.menuItem)return e=null,!1;var o,n,a=t(i.menuItem);return e!==i&&(o=t("#"+i.id),e=i,r.find("."+v.active).removeClass(v.active),a.addClass(v.active),t("."+v.section).removeClass(v.section),o.addClass(v.section),n=Math.round("default"===s?a.position().top:a.position().top+3),Modernizr.csstransitions?f.css("top",n):parseInt(f.css("opacity"),10)<1?f.css({top:n,opacity:"1"},0):f.animate({top:n},50),_(),void f.addClass(v.chevron))}}(),validateAnchor:function(e){var i=document.getElementById(e),o=t(i),n=!!o.length&&{element:i};return n},resetMenuItems:function(){var e=t("."+v.active),i=t("."+v.section);return function(){return!t("html:animated, body:animated").length&&(e.removeClass(v.active),i.removeClass(v.section),void f.removeClass(v.chevron))}}(),articleNavModel:function(){var e,i,o,n,s,r=[],a=this.root.find(".js-scrollto");if(a.length)for(e=0;i=a[e];e++)o=t(i).attr("href").split("#")[1],n=this.validateAnchor(o),n&&(s=t(n.element).offset().top,r.push({anchorContent:n,id:o,menuItem:i,top:s}));return r},getViewportElement:function(){var e,i,n,r,a=null,l=(t(".article-tools__article-nav-item"),parseInt(t(".article-section").eq(0).css("margin-bottom"),10)),c=this,h=.5*t(window).height(),d=0,u=o.get("#js-article-tools");if("panel"===s&&(u.length&&(d=u.outerHeight()),h+=d),c.fromClick)c.fromClick=!1,a=c.clickedElm;else{for(i=0;e=this.model[i];i++)if(r=document.getElementById(e.id),null===a&&(n=r&&r.getBoundingClientRect(),n&&n.top<=h&&n.bottom+l>=.5*h)){a=e;break}null===a&&f.removeClass(v.chevron).removeAttr("style")}return a}},C}),WILEY.define("modules/author-manuscript",["common/modules/jquery-loader","common/modules/modal","common/modules/utilities","common/facades/pubsub"],function(t,e,i,o){var n={container:"author-manuscript-cnt",iframeId:"pdfAuthorManuscript"},s={error:"Error",loading:"Loading...",retry:"There was a technical error, please try again."},r=function(e){var i=this;i.element=t(e),i.element.off().on("click",t.proxy(i.openPDF,this)),i.options={title:s.loading,fixedPane:!0,showCloseButton:!0},o.subscribe({resizing:t.proxy(i.resize,this)})};return r.prototype={getTemplate:function(){var i=this.element.attr("href"),o=t.get(i);this.options.html="",this.options.title=s.loading,this.options.onstart=t.proxy(function(){(this.isMobileView()||Modernizr.touch)&&t(".mobile-panel__header").hide()},this),e.open(this.options),o.done(t.proxy(function(e){this.html='<div class="'+n.container+'">'+e+"</div>",this.options.html=this.html,this.options.title="Author Manuscript",(this.isMobileView()||Modernizr.touch)&&(location.href=t(e).attr("src"))},this)),o.fail(t.proxy(function(){error=Fragment.getTemplate().replace("{{title}}",s.error).replace("{{content}}","<p>"+s.retry+"</p>"),this.options.html=error,this.options.title=s.error,this.options.resize=!1},this)),o.always(t.proxy(function(){e.update(this.options),this.resizeIframe()},this))},openPDF:function(t){t.preventDefault(),this.getTemplate()},resizeIframe:function(){var e=t("#cboxContent").outerHeight(),i=t("#cboxTitle").outerHeight();t("."+n.container).css({height:e-i,paddingTop:i})},resize:function(){t("#"+n.iframeId).is(":visible")&&this.resizeIframe()},isMobileView:function(){return/small/.test(i.getViewState())}},r}),WILEY.define("modules/add-this",["common/modules/jquery-loader","common/modules/controller","common/utilities/string","common/utilities/data","configuration/add-this"],function(t,e,i,o,n){"use strict";var s={access:"is-accessible",active:"add-this--active",align:"align--right",addthis:{button:"addthis_button_",footer:"add-this__footer",list:"add-this__list",toolbox:"addthis_toolbox addthis_default_style addthis_32x32_style",wrapper:"add-this",extra:"add-this__footer-link"},icon:{api:"icon__addthis",name:"icon",privacy:"icon__privacy",tool:"icon__tool",share:"icon__tool--share"},id:"share-this",intro:"overlay__intro",js:"js-module",label:"article-tools__tool-text",link:"article-tools__tool-link",list:"article-tools__tool--share",lists:{inline:"u-horizontal-list",plain:"u-list-standard"},overlay:"overlay__content modal__content",title:"overlay__title",plan:"u-list-plain",small:"state__small--on"},r={},a={twitter:"Twitter",mendeley:"Mendeley",facebook:"Facebook",researchgate:"ResearchGate",diigo:"Diigo",email:"Email",more:"Settings"},l={label:"Share",privacy:"Privacy",social:"Use these sharing options:",title:"Share article via Social Media",tool:"AddThis"},c={addthis:"add-this",readcube:"readcube"},h={doi:"",pubid:n.id,data_track_clickback:!1},d={homepage:"http://www.addthis.com/website-tools/overview",privacy:"http://www.addthis.com/privacy/privacy-policy",share:"http://"+window.location.host+"/doi/"},u=function(t){return t=decodeURIComponent(t)},f=function(t){var e,i="";switch(t){case"link":i+='<a class="'+s.link+" "+s.js+'" ',i+='data-overlay="medium" ',i+='data-body="paddless" ',i+='data-title="'+l.title+'" ',i+='data-title-hide="true" ',i+='data-module="common_overlay" ',i+='href="#'+s.id+'">',i+='<span class="'+s.icon.name+" "+s.icon.tool+" "+s.icon.share+'"></span>',i+='<span class="'+s.label+'">'+l.label+"</span>",i+="</a>";break;case"addthis":i+="<li>",i+='<a href="#" ',i+='addthis:url="'+u(d.share)+h.doi+'/full/" ',i+='class="'+s.addthis.button+'{service}">',i+="{label}",i+="</a>",i+="</li>";break;case"footer-links":i+='<div class="'+s.addthis.footer+'">',i+='<ul class="'+s.lists.inline+'">',i+='<li class="'+s.addthis.extra+'">',i+='<a href="'+d.homepage+'" target="_blank">',i+='<span class="'+s.icon.name+" "+s.icon.api+'"></span>',i+=l.tool,i+="</a>",i+="</li>",i+='<li class="'+s.addthis.extra+" "+s.align+' ">',i+='<a href="'+d.privacy+'" target="_blank">',i+='<span class="'+s.icon.name+" "+s.icon.privacy+'"></span>',i+=l.privacy,i+="</a>",i+="</li>",i+="</ul>",i+="</div>";break;case"list":i+='<div id="'+s.id+'" ',i+='class="'+s.overlay+" "+s.js+'"',i+='data-module="'+c.addthis+'">',i+='<div class="'+s.js+'" data-module="'+c.readcube+'"></div>',i+='<div class="'+s.addthis.wrapper+'">',i+='<section class="'+s.addthis.toolbox+' ">',i+='<h3 class="'+s.title+" "+s.small+'">'+l.title+"</h3>",i+='<p class="'+s.intro+'">'+l.social+"</p>",i+='<ul class="'+s.lists.plain+" "+s.id+" "+s.addthis.list+'">';for(e in a)a.hasOwnProperty(e)&&(i+=f("addthis").replace("{service}",e).replace("{label}",a[e]));i+="</ul>",i+="</section>",i+="</div>",i+=f("footer-links"),i+="</div>"}return i},m=function(t){t.preventDefault(),r.list.append(f("list"))},p=function(){var t=o.getTitle(),e={title:0,twitter:140,url:23},n={mock:t+" "+u(d.share)+h.doi+"/full",body:t};n.mock.length>e.twitter&&(e.title=t.length-(n.mock.length-e.twitter),n.body=i.truncate(t,e.title,!0)),window.addthis_share={passthrough:{twitter:{text:n.body}}},window.addthis.toolbox(r.list[0]),r.body.addClass(s.active)},g={link:function(i){r.list=i,r.link=t(f("link")),r.link.one("click",m),e.set(r.link[0]),r.list.prepend(r.link),r.list.removeClass(s.list)},list:function(e){r.body=e,r.list=e.find(".addthis_toolbox "),window.addthis_config=h,window.addthis?p():t.getScript(n.url,p)}};return function(e){var i;e=t(e),i=e.is("li")?"link":"list",h.doi=e.is("li")?e.attr("data-doi"):h.doi,g[i](e)}}),WILEY.define("modules/character-revealer",["common/modules/jquery-loader","common/modules/utilities"],function(t,e){"use strict";var i={additional:"more",on:"Show",off:"Hide"},o=function(e){this.$root=t(e);var i,o,n=t.trim(this.$root.html());n.length<120||(this.id=this.$root.attr("id")||"#character-revealer-"+(new Date).getTime(),i=n.replace(/.{120}\S*\s+/,"$&@").split(/\s+@/),o=i[0]+'<span class="js-revealer__toggle">'+i[1]+"</span>",this.buildControl(),this.$control.find(".js-revealer__control").on("click",t.proxy(this.toggleCharacters,this)),this.$root.addClass("js-revealer__character").attr("id",this.id).empty().prepend(o),this.$content=this.$root.find(".js-revealer__toggle"),this.setDefaultHeight(),this.$content.addClass("js-revealer__toggle--hidden"),Modernizr.csstransitions||this.$content.slideUp(),this.$root.after(this.$control))};return o.prototype={buildControl:function(){var e="";e+='<span class="js-revealer__control-wrapper">',e+='<button type="button" class="button__link js-revealer__control js-revealer__control--active">',e+='<span class="js-revealer__control-toggle">'+i.on+"</span> ",e+=i.additional,e+="</button>",e+="</span>",this.$control=t(e),this.$toggle=this.$control.find(".js-revealer__control-toggle")},setDefaultHeight:function(){this["default-height"]=this.$content.height()/e.getElementFontSize(this.$content)+"em"},toggleCharacters:function(t){var e,o;this.$content.hasClass("js-revealer__toggle--hidden")?(o=this["default-height"],e=i.off):(o=0,e=i.on),Modernizr.csstransitions?this.$content.css("height",o):this.$content.slideToggle(),this.$content.toggleClass("js-revealer__toggle--hidden"),this.$toggle.text(e)}},o}),WILEY.define("modules/child-revealer",["common/modules/jquery-loader"],function(t){"use strict";var e=function(e){this.$el=t(e),this.init()},i={active:"children-revealer__active",text:"children-revealer__text"},o={articles:" corrected articles",on:"Show all",off:"Show fewer"};return e.prototype={init:function(){var e=this.$el.children();this.show=parseInt(this.$el.attr("data-show"),10),e.length>this.show&&(this.id="child-revealer-"+t.now(),this.$children=e.eq(this.show).nextAll().andSelf(),this.$el.attr("id",this.id),this.buildControl(),this.hideChildren())},buildControl:function(){var e="";e+='<div class="children-revealer__control clear">',e+='<button type="button" class="button__link">',e+='<span class="icon icon__double-chevron--blue"></span>',e+='<span class="'+i.text+'">'+o.on+"</span>",e+=o.articles,e+="</button>",e+="</div>",this.$control=t(e),this.$text=this.$control.find("."+i.text),this.$control.find("button").on("click",t.proxy(this.toggleChildren,this)),this.$el.after(this.$control)},hideChildren:function(){this.$children.slideUp("fast",t.proxy(function(){this.$text.text(o.on)},this))},showChildren:function(){this.$children.slideDown("fast",t.proxy(function(){this.$text.text(o.off)},this))},toggleChildren:function(t){t.preventDefault(),this.$control.hasClass(i.active)?this.hideChildren():this.showChildren(),this.$control.toggleClass(i.active)}},e}),WILEY.define("modules/fragment",["common/modules/jquery-loader","common/modules/modal","common/modules/controller"],function(t,e,i){"use strict";var o={body:"ajax-fragment__body modal__body",clear:"clearfix",field:"form__field",form:"form",fragment:"js__ajax-fragment",off:"ajax-fragment__off",scrollable:"modal__scrollable ",title:"ajax-fragment__title",wrapper:"ajax-fragment modal__fragment"},n={error:"Error",loading:"Loading...",retry:"There was a technical error, please try again."},s=function(e){var i;this.element=t(e),this.form=!!this.element.is("."+o.field)&&this.element.closest("."+o.form),i=this.form?"change":"click",this.element.on(i,t.proxy(this.getContent,this)),this.options={title:n.loading,fixedPane:!1,resize:!0,showCloseButton:!0,size:this.element.data("fragment")||"small"}};return s.getTemplate=function(){var t="";return t+='<div class="'+o.wrapper+'" id="'+o.wrapper+'">',t+='<h2 class="'+o.title+'">{{title}}</h2>',t+='<div class="'+o.body+'">',t+='<div class="'+o.scrollable+'">',t+='<div class="'+o.clear+'">',t+="{{content}}",t+="</div>",t+="</div>",t+="</div>",t+="</div>"},s.prototype={getContent:function(r){var a,l,c=this.form?this.form.attr("action"):this.element.attr("href"),h=this.form?this.form.serialize():{};l=t.ajax({cache:!1,data:h,url:c}),"click"===r.type&&r.preventDefault(),this.options.html="",this.options.title=n.loading,e.open(this.options),l.done(t.proxy(function(e){this.html=t(e).find("#"+o.fragment),i.set(this.html),this.options.html=this.html,this.options.title=this.html.find("."+o.title).text()},this)),l.fail(t.proxy(function(){a=t(s.getTemplate().replace("{{title}}",n.error).replace("{{content}}","<p>"+n.retry+"</p>")),this.options.html=a,this.options.title=n.error,this.options.resize=!1},this)),l.always(t.proxy(function(){this.options.html.on("click","."+o.off,t.proxy(this.resetFragment,this)),e.update(this.options)},this))},resetFragment:function(t){t.preventDefault(),e.close()}},s}),WILEY.define("modules/citations",["common/modules/jquery-loader","common/modules/controller","common/modules/modal","common/modules/utilities","common/utilities/dom","modules/fragment"],function(t,e,i,o,n,s){"use strict";var r,a={active:"citations--available",body:"body",control:"js-citations__control",count:"js-citations__count",counter:"js-citations__counter",data:"article-header__meta-info-2nd-data",error:"warning",status:"citations__status",section:"js-citations__section",tools:"citation-tools",refresh:"js-citations__refresh"},l={date:"Last updated",error:"Citations can't be refreshed at this time. Please try again later.",loading:"Retrieving citations...",title:"Error"},c=function(e){this.elem=t(e),this.body=n.get(a.body),this.count=t("#"+a.count),this.section=t("#"+a.section),this.control=t("#"+a.control),this.refresh=t("#"+a.refresh),r=parseInt(this.count.text(),10),this.bindEvents()};return c.prototype={bindEvents:function(){this.refresh.one("click",t.proxy(this.getCitations,this))},getCitations:function(e){var i;e.preventDefault(),this.refresh.replaceWith(this.getTemplate("loading")),i=t.ajax({cache:!1,url:this.refresh.attr("href")}),i.done(t.proxy(this.setCitations,this)),i.fail(t.proxy(this.setError,this)),i.always(t.proxy(function(e){o.isSystematicReview()&&0===r&&t("#"+a.tools).remove()},this))},getTemplate:function(e){var i,o="";switch(e){case"date":i=new Date(t.now()).toDateString(),o+='<span class="'+a.data+" "+a.status+'">',o+=l.date+" ",o+='<time datetime="'+i+'">'+i+"</time>",o+="</span>";break;case"error":o+='<p class="'+a.error+'">',o+=l.error,o+="</p>";break;case"loading":o+='<span class="'+a.data+" "+a.status+'">',o+=l.loading,o+="</span>"}return this[e]=t(o),this[e]},setCitations:function(i){var o=t(i),n=parseInt(o.find("#"+a.counter).text(),10);switch(n){case 0:r=n,this.body.removeClass(a.active),this.loading.replaceWith(this.getTemplate("date")),this.setCounter(),this.section.empty();break;case r:this.loading.remove();break;default:r=n,this.loading.remove(),this.setCounter(),e.set(o),this.section.empty().prepend(o),this.body.addClass(a.active)}},setCounter:function(){var e=this.count;t({total:e.text()}).animate({total:r},{duration:2e3,easing:"linear",step:function(){e.text(Math.floor(this.total))},complete:function(){e.text(this.total)}})},setError:function(){var t=s.getTemplate();t=t.replace("{{content}}",this.getTemplate("error").prop("outerHTML")),t=t.replace("{{title}}",l.title),this.loading.remove(),i.open({html:t,showCloseButton:!0,showCloseSecondary:!1,size:"extra-small",title:l.title})}},c}),WILEY.define("modules/routes",[],function(){"use strict";var t={"citation-alert":"citation-alert",references:"references"};return t}),WILEY.define("modules/citation-alert",["common/modules/jquery-loader","common/modules/modal","common/modules/loader","modules/routes","common/modules/router","common/modules/utilities","common/facades/analytics","modules/fragment"],function(t,e,i,o,n,s,r,a){"use strict";var l={actions:{reset:"Remove citation alert",set:"Set citation alert"},error:"Technical Error",reset:"Citation alert removed",set:"Citation alert set"},c={buttons:{link:"button__link",name:"button",primary:"button--primary",secondary:"button--secondary"},icons:{name:"icon",reset:"icon__trash",set:"icon__bell"},wrapper:"form__row"},h={defined:!1,login:"",profile:"",registration:"",service:""},d=function(t){var e;switch(t){case 201:e=l.set;break;case 204:e=l.reset;break;case 301:e=l.set;break;case 401:e=l.set;break;default:e=l.error}return e},u=function(t){var e="",i="";switch(t){case"button-wrapper":i+='<div class="'+c.wrapper+'">',i+="{{button}}",i+="</div>";break;case"button-close":i+='<button class="'+c.buttons.name+" "+c.buttons.secondary+'" type="button">',i+="{{action}}",i+="</button>";break;case"button-set":i+=u("button-close").replace("{{action}}","Ok");break;case"button-reset":i+=u("button-close").replace("{{action}}","Cancel");break;case"button-login":i+='<a href="'+h.login+'" class="'+c.buttons.name+" "+c.buttons.primary+'">',i+="Login",i+="</a>";break;case"icon":i+='<span class="'+c.icons.name+' {{class}}"></span>';break;case 201:i+="<p>",i+='Manage alerts on <a href="'+h.profile+'">your profile</a>',i+="</p>",i+=u("button-wrapper").replace("{{button}}",u("button-set"));break;case 204:i+="<p>",i+="Your Citation alert has been removed, manage alerts on ",i+='<a href="'+h.profile+'">your profile</a>',i+="</p>",i+=u("button-wrapper").replace("{{button}}",u("button-set"));break;case 301:i+=u(401);break;case 401:e+=u("button-reset"),e+=u("button-login"),i+="<p>",i+="Please login in using your <b>individual</b> user account to set your alert, ",i+='if you do not have an account please <a href="'+h.registration+'">register for one here</a>',i+="</p>",i+=u("button-wrapper").replace("{{button}}",e);break;default:i+="<p>",i+="Sorry, there has been an error please try again.",i+="</p>",i+=u("button-wrapper").replace("{{button}}",u("button-set"))}return i},f=function(i){return i=t(i),i.find(c.buttons.name).on("click",e.close),i},m=function(t){var i=a.getTemplate(),o="object"==typeof t?t.status:t,n=d(o);i=i.replace("{{content}}",u(o)),i=i.replace("{{title}}",n),i=f(i),e.open({html:i,showCloseButton:!0,size:"extra-small",title:n})},p=function(t){r.set({name:"citation-alert",data:{action:t,state:"off"===this.state?"on":"off"}})},g=function(t,e,i){var o,n,s,r=u("icon"),a=i.status;i.promise&&p.call(this,"success"),this.state=201===a?"on":"off","on"===this.state?(o=l.actions.reset,n=c.icons.reset,s="on"):(o=l.actions.set,n=c.icons.set,s="reset"),r=r.replace(/{{class}}/,n),r+=o,this.button=this.button||this.element.find("."+c.buttons.link),this.button.html(r),this.element.data("state",s),m(a)},v=function(){h.defined||(h.service=h.service||this.element.attr("action"),h.profile=h.profile||this.element.data("user-profile"),h.login=h.login||this.element.data("login"),h.registration=h.registration||this.element.data("registration"),h.defined=!0)},b=function(e){var o;e.preventDefault(),v.call(this),p.call(this,"intent"),i.set(this.element,"small"),o=t.ajax({method:"off"===this.state?"POST":"DELETE",url:h.service}),o.done(t.proxy(g,this)),o.fail(m),o.always(t.proxy(function(){i.reset(this.element)},this))};return function(e){this.element=t(e),this.state=this.element.data("state"),this.element.on("submit",t.proxy(b,this)),"set"===this.element.data("citation-state")&&(v.call(this),g.call(this,void 0,void 0,{status:201}))}}),WILEY.define("modules/citation-select",["common/modules/jquery-loader","common/modules/utilities","common/facades/scrollable"],function(t,e){"use strict";var i={form:"#download-citation-form",items:".citation__list__item",select:"#citation__select",textbox:".js__citation"},o={active:"citation__list__item--active"},n={},s=function(e){this.element=t(e),this.form=this.element.find(i.form),this.select=this.form.find(i.select),this.items=this.form.find(i.items),this.textbox=this.form.find(i.textbox),this.display=this.textbox.find("pre"),s.url=this.form.attr("action"),n.text=t.Deferred(),n.text.resolve(t.trim(this.textbox.text())),this.textbox.scrollable(),this.textbox.on("click touchstart",t.proxy(this.getText,this)),this.select.on("change",t.proxy(this.setCitation,this)),this.items.on("click",t.proxy(this.setCitation,this))};return s.getCitation=function(e){var i={"citation-type":e||"text"};return"refworks"===e&&(i["download-citation-abstract"]="Download Citation & Abstract"),n.hasOwnProperty(e)||(n[e]=t.get(s.url,i,"html")),n[e]},s.prototype={getText:function(){e.selectText(this.textbox[0])},setCitation:function(e){var r=t(e.target),a=r.data("value")||r.val();e.preventDefault(),this.display.empty(),s.getCitation(a),n[a].done(t.proxy(function(e){this.display.append(e),this.textbox.scrollable("update"),this.select.val(a),t(i.items).removeClass(o.active),r.addClass(o.active)},this))}},s}),WILEY.define("modules/citation-export",["common/modules/jquery-loader","modules/citation-select","configuration/add-this","common/utilities/ie"],function(t,e,i,o){"use strict";var n={action:"click touchstart",ready:"addthis.ready"},s={active:"add-this--active",button:"js__export-refworks",doi:"article-info__section-doi-data",form:"add-this__reforks-form",list:"add-this__list",textarea:"citation__refworks",toolbox:"addthis_toolbox"},r={citeulike:"CiteULike",mendeley:"Mendeley",refworks:"RefWorks"},a={pubid:i.id},l={refworks:"http://www.refworks.com/express/ExpressImport.asp?vendor=Wiley&filter=RefWorks%20Tagged%20Format&encoding=65001"},c=function(t){var e="";switch(t){case"addthis":e+="<li>",e+='<a href="#" addthis:url="'+h(window.location.href)+'" class="addthis_button_{service}">{label}</a>',e+="</li>";break;case"refworks":e+="<li>",e+='<form class="add-this__reforks-form" name="ExportRWForm" method="POST" target="RefWorksMain" action="'+l.refworks+'">',e+='<textarea id="'+s.textarea+'" name="ImportData" rows="30" cols="70" class="is-accessible"></textarea>',e+='<button class="js__export-refworks button__link" type="submit" name="Submit">',e+='<span class="icon icon__refworks"></span>',e+=r.refworks,e+="</button>",e+="</form>",e+="</li>"}return e},h=function(t){return t=decodeURIComponent(t),t+="/"!==t.substr(-1)?"/":""},d=function(e){this.element=t(e),this.toolbox=this.element.find("."+s.toolbox),this.list=this.toolbox.find("."+s.list),this.setServices(),this.getServices(),this.textarea=t("#"+s.textarea)};return d.prototype={getServices:function(){window.addthis_config=a,t.getScript(i.url,t.proxy(function(){this.setEvents(),o.is(8)||window.addthis.toolbox(this.toolbox[0]),this.setState()},this))},setCitation:function(i){i.preventDefault();var o=e.getCitation(r.refworks.toLowerCase());o.done(t.proxy(function(t){this.textarea.text(t),this.list.find("form").submit()},this))},setEvents:function(){window.addthis.addEventListener(n.ready,t.proxy(this.setState,this)),this.toolbox.on(n.action,"."+s.button,t.proxy(this.setCitation,this))},setServices:function(){var t;for(t in r)r.hasOwnProperty(t)&&t!==r.refworks.toLowerCase()&&!o.is(8)&&this.list.append(c("addthis").replace("{service}",t).replace("{label}",r[t]));this.list.append(c(r.refworks.toLowerCase()))},setState:function(){this.element.addClass(s.active)}},d}),WILEY.define("modules/clipboard",["common/modules/jquery-loader","common/modules/utilities"],function(t,e){"use strict";var i={notification:"Please press CTRL/CMD + C to copy."},o={clipboard:"clipboard",notification:"clipboard__notification"},n=function(n){this.target=this.target||t(this.element.data("target"))[0],e.selectText(this.target),document.execCommand?document.execCommand("copy"):this.notification||(this.notification='<p class="'+o.notification+'">'+i.notification+"</p>",t(this.target).closest("."+o.clipboard).append(this.notification))};return function(e){this.element=t(e),this.element.on("click",t.proxy(n,this))}}),WILEY.define("modules/content-revealer",["common/modules/jquery-loader","common/modules/utilities"],function(t,e){"use strict";var i={on:"See",off:"Hide"},o=function(e){var i="";this.$root=t(e),this.$content=this.$root.find('[data-content="reveal"]'),this.$content.length&&(this.id=this.$root.attr("id")||"additional-author-notes-"+(new Date).getTime(),i+='<button type="button" class="js-revealer__control button__link">',i+='<span class="js-revealer__control-toggle">See</span> ',i+="additional note",i+='<span class="icon icon__double-chevron-up"></span>',i+="</button>",this.$root.addClass("article-header__author-content--with-additional").attr("id",this.id),this.$control=t(i),this.$toggle=this.$control.children(".js-revealer__control-toggle"),this.$icon=this.$control.find(".icon"),this.setDefaultHeight(),this.$content.addClass("js-revealer__content"),this.hideContent(),this.$root.append(this.$control))};return o.prototype={hideContent:function(e){Modernizr.csstransitions?this.$content.removeAttr("style"):this.$content.slideUp("fast"),this.$toggle.text(i.on),this.setState(),this.$control.one("click",t.proxy(this.showContent,this))},setDefaultHeight:function(){this["default-height"]=this.$content.height()/e.getElementFontSize(t("body"))+"em"},setState:function(){this.$content.toggleClass("js-revealer__content--hidden"),this.$icon.toggleClass("icon__double-chevron-down").toggleClass("icon__double-chevron-up")},showContent:function(e){Modernizr.csstransitions?this.$content.css("height",this["default-height"]):this.$content.slideDown(),this.$toggle.text(i.off),this.setState(),this.$control.one("click",t.proxy(this.hideContent,this))}},o}),WILEY.define("modules/dialogue",["common/modules/jquery-loader"],function(t){"use strict";var e={active:"dialogue__action--active",body:"body",button:"button__link",element:"dialogue",dialogue:"dialogue__popup",head:"dialogue__head",icon:{name:"icon",reset:"icon__window-close"},reset:"dialogue__action--reset",set:"dialogue__action--set",state:"is-visible"},i={},o={reset:"Close"},n=function(t){var i="";switch(t){case"reset":i+='<button type="button" class="'+e.button+" "+e.reset+'">',i+='<span class="'+e.icon.name+" "+e.icon.reset+'"></span>',i+=o.reset,i+="</button>"}return i},s=function(o){var n="click"===o.type?t(o.target):this.element;(!n.closest("."+e.element).length||n.hasClass(e.reset)||n.hasClass(e.icon.reset)||27===o.which)&&(this.dialogue.removeClass(e.state),this.set.removeClass(e.active),this.set.focusin(),i.body.off("click keyup",s))},r=function(t){t.preventDefault(),this.element.find("."+e.head).prepend(n("reset"))},a=function(o){o.preventDefault(),this.set.hasClass(e.active)||(this.dialogue=this.dialogue||this.element.find("."+e.dialogue),i.body=i.body||t(e.body),this.dialogue.addClass(e.state),this.set.addClass(e.active),i.body.on("click keyup",t.proxy(s,this)))};return function(i){this.element=t(i),this.set=this.element.find("."+e.set),this.set.one("click",t.proxy(r,this)),this.set.on("click",t.proxy(a,this))}}),WILEY.define("modules/figures",["common/modules/jquery-loader","common/modules/controller","common/utilities/ie","jquery-lazyload"],function(t,e,i){"use strict";var o=t("#js-figure-viewer__link").attr("href")+"#figure-viewer-",n=i.is(8);return window.name="article",function(){t(".inline-figure").each(function(i,s){var r=t(s),a=r.find("a"),l=r.find("img"),c={id:r.parent().attr("id"),imgSrc:l.attr("src"),title:a.eq(0).attr("title")};return!r.data("figure-enhanced")&&(r.data("figure-enhanced",!0),l.lazyload({event:"figures.load",effect:"fadeIn",skip_invisible:!1}).trigger("figures.load"),void a.each(function(i,s){var r=t(s),a="",l=r.attr("href");if(n)r.attr({target:"_blank"});else{if(i<2)0===i?r.attr("title",c.title+" in figure viewer"):r.text("Open in figure viewer"),a=o+c.id;else{if(!/#f\d$/.test(l))return;a=o+l.match(/f\d$/)[0]}r.attr({href:a,target:"figureViewer"}),e.addApp("modules/figure-viewer-modal",s)}}))})}}),WILEY.define("modules/figure-panning",["common/modules/jquery-loader"],function(t){
"use strict";var e;return t.fn.getBox=function(){var e=t.extend({},t(this).get(0).getBoundingClientRect());return e.height||(e.height=e.bottom-e.top,e.width=e.right-e.left),e.height=Math.round(e.height),e.width=Math.round(e.width),e},function(){if(e)return e;var i=t(document),o=["top","right","bottom","left"],n=["clientY","clientX"],s=[!1,!0,!0,!1],r=["top","left","top","left"],a=["height","width","height","width"];return e=function(e){function l(){return{clientX:0,clientY:0}}function c(e){var i=w[_()-1];t.each(l(),function(t){i[t]=e[t]})}function h(){var e={};return t.each(["height","width"],function(t,i){e[i]=k.getBox()[i]>y.getBox()[i]}),e.both=e.height&&e.width,e.either=e.height||e.width,e}function d(e,i,o){var n={},s=h();t.each(e,function(t){var i=r[t];s[a[t]]&&(n[i]=parseInt(k.css(i),10)+e[t])}),i?k.animate(n,{queue:!1,complete:o}):k.css(n)}function u(){var e={},i=y.getBox(),n=k.getBox();t.each(o,function(t,o){var l=n[o]>i[o],c=s[t]?!l:l,h=a[t],d=0;!c||n[h]<=i[h]||(s[t]&&(d=i[h]-n[h]),e[r[t]]=d)}),t.isEmptyObject(e)||k.stop().animate(e)}function f(e){e.preventDefault(),e.originalEvent&&e.originalEvent.touches&&(e=e.originalEvent.touches[0]);var i=t.map(n,function(t){return e[t]-w[0][t]});i&&(d(i,!1),c(e))}function m(){return _(-1),i.off("mousemove touchmove mouseup touchend"),0===_()?u():1===_()?i.on("mousemove touchmove",f):void 0}function p(t,e){d([e.clientY,e.clientX],!0,function(){u()})}function g(t,e){var i=h();(0!==e.clientX&&i.width||0!==e.clientY&&i.height)&&y.trigger("panClick",e)}var v,b,_=function(){var t=0;return function(e){return e&&(t=Math.max(0,Math.min(2,t+~~e))),t}}(),w=[l(),l()],y=e.$figureZoomer,k=y.find("img");v=function(){function t(){o=!1}var e=["Out","In"],o=!1,n=250;return function(s){var r=s.originalEvent.scale,a=Math.min(1,Math.max(0,Math.floor(r)));s.preventDefault(),1!==r&&o!==!0&&(y.trigger("figureZoomer.zoom"+e[a]),i.off("touchend.doubleTap"),setTimeout(t,n))}}(),b=function(){return function(t){if(h().either)return t.preventDefault(),_(1),i.on("mouseup touchend",m),c(t),1===_()?i.on("mousemove touchmove",f):void 0}}(),y.on("mousedown touchstart",b).on("gestureend",v).on("panClick",p),e.$component.on("panBy",g)}}()}),WILEY.define("modules/figure-image",[],function(){"use strict";var t=function(t){this.$image=t,this._physicalImageMetrics={width:t.width(),height:t.height()},this._renderedHeight=null,this._renderedWidth=null,this._renderedPosition=null};return t.prototype={calcWidthFromHeight:function(t){return t*this.getRatio()},calcHeightFromWidth:function(t){return t/this.getRatio()},setRenderedSizeByHeight:function(t){this._renderedHeight=Math.floor(t),this._renderedWidth=this.calcWidthFromHeight(this._renderedHeight)},setRenderedSizeByWidth:function(t){this._renderedWidth=Math.floor(t),this._renderedHeight=this.calcHeightFromWidth(this._renderedWidth)},getRatio:function(){return this._physicalImageMetrics.width/this._physicalImageMetrics.height},getRenderedWidth:function(){return this._renderedWidth},setRenderedWidth:function(t){this._renderedWidth=t},getRenderedHeight:function(){return this._renderedHeight},setRenderedHeight:function(t){this._renderedHeight=t},getPhysicalWidth:function(){return this._physicalImageMetrics.width},getPhysicalHeight:function(){return this._physicalImageMetrics.height},setRenderedPositionFromViewPortMetric:function(t){var e=t.width/2-this.getRenderedWidth()/2,i=t.height/2-this.getRenderedHeight()/2;this._renderedPosition={x:e,y:i}},getRenderedPosition:function(){return this._renderedPosition},setRenderedPosition:function(t){this._renderedPosition=t},getImage:function(){return this.$image},getMetrics:function(){return this._physicalImageMetrics}},t}),WILEY.define("modules/zoomed-image-data",[],function(){"use strict";var t=function(t){this.preZoomTop=t.top,this.preZoomLeft=t.left,this.preZoomWidth=t.width,this.preZoomHeight=t.height,this.actualWidth=t.actualWidth,this.actualHeight=t.actualHeight,this.currentPositionTop=this.preZoomTop,this.currentPositionLeft=this.preZoomLeft,this.currentWidth=this.preZoomWidth,this.currentHeight=this.preZoomHeight,this.newPositionTop=null,this.newPositionLeft=null,this.newWidth=null,this.newHeight=null},e=function(){this.newPositionTop=this.currentPositionTop-Math.round((this.newHeight-this.currentHeight)/2),this.newPositionLeft=this.currentPositionLeft-Math.round((this.newWidth-this.currentWidth)/2),this.currentWidth=this.newWidth,this.currentHeight=this.newHeight,this.currentPositionTop=this.newPositionTop,this.currentPositionLeft=this.newPositionLeft},i=function(){this.currentPositionTop=this.preZoomTop,this.currentPositionLeft=this.preZoomLeft,this.currentWidth=this.preZoomWidth,this.currentHeight=this.preZoomHeight,this.newPositionTop=null,this.newPositionLeft=null,this.newWidth=null,this.newHeight=null};return t.prototype={zoomDataInBy:function(t){var i=t+1;this.newHeight=this.currentHeight*i,this.newWidth=this.currentWidth*i,e.call(this)},zoomDataOutBy:function(t){var i=t+1;this.newHeight=this.currentHeight/i,this.newWidth=this.currentWidth/i,e.call(this)},getPosition:function(){return{x:this.currentPositionLeft,y:this.currentPositionTop}},setPosition:function(t){this.currentPositionTop=t.y,this.currentPositionLeft=t.x},setPreZoomTop:function(t){this.preZoomTop=t},resetImageData:function(){i.call(this)}},t}),WILEY.define("modules/figure-component",["common/modules/jquery-loader","modules/figure-viewer","modules/figure-image","modules/zoomed-image-data","modules/figure-panning","jquery-mousewheel"],function(t,e,i,o,n){"use strict";var s;return s=function(e){var o=this,n=t("#"+e),s=n.find("img.figure-viewer__figure-image"),r=s.data("zoomer-class"),a=t("<div />").attr("class",r);s.wrap(a),o.$component=n,o.$figureZoomer=s.parent(),o.$image=s,o.figureImage=new i(s),o.animating=!1,o.animationEasing="swing",o.animationDuration=300,o.panningInvoked=!1,o.zoomImageData=null,o.zoomerImageURL=s.data("figure-zoomer-img"),o.zoomIncrement=.25,o.zoomInLimitedReached=!1,o.zoomMode=!1,o.zoomOutLimitedReached=!1,o.$figureZoomer.on("mousewheel",function(){o.mouseWheelEventHandler.apply(o,Array.prototype.slice.call(arguments,0))}),o.$figureZoomer.on("figureImage.viewPortChange",t.proxy(o.viewPortChangeEventHandler,o)),o.$figureZoomer.on("figureZoomer.zoomIn",t.proxy(o.zoomInEventHandler,o)),o.$figureZoomer.on("figureZoomer.zoomOut",t.proxy(o.zoomOutEventHandler,o)),o.$figureZoomer.on("figureZoomer.loadZoomerImage",t.proxy(o.loadZoomImageEventHandler,o)),o.$component.on("click",".figure-viewer__figure-zoom-in, .figure-viewer__figure-zoom-out, .figure-viewer__caption-tools-hider",t.proxy(o.figureControls,o))},s.prototype={figureControls:function(e){e.preventDefault();var i,o=t(e.currentTarget),n=o.closest(".figure-viewer__figure-container").find(".js-figure-zoomer");o.hasClass("figure-viewer__figure-zoom-in")?i="figureZoomer.zoomIn":o.hasClass("figure-viewer__figure-zoom-out")?i="figureZoomer.zoomOut":o.hasClass("figure-viewer__caption-tools-hider")&&(t("#js-figure-viewer").toggleClass("caption-hidden"),i="figureImage.viewPortChange"),n.trigger(i)},show:function(e){var i=this,o=e.delay||0,n=e.animate||!1,s=e.fixZoom||!1,r=e.callback||null,a=t("#js-figure-viewer").find(".figure-viewer__horizontal-figures-scroller-container");s||(i.zoomImageData=null,i.resizeRenderedImageToViewPort()),i.setRenderedImagePositionByCurrentViewPort(),i.redrawImage(!1),window.setTimeout(function(){"function"==typeof r?a.scrollTo(i.$component,n,r):a.scrollTo(i.$component,n)},o)},loadImage:function(){this.resizeRenderedImageToViewPort(),this.setRenderedImagePositionByCurrentViewPort(),this.redrawImage(!1),this.animateShow()},initZoomData:function(){var t=this.figureImage.getImage(),e=(t.parent().outerHeight()-t.outerHeight())/2,i=(t.parent().outerWidth()-t.outerWidth())/2,n=t.outerWidth(),s=t.outerHeight(),r=parseFloat(t.css("width"),10),a=parseFloat(t.css("height"),10);this.zoomImageData=new o({top:e,left:i,width:n,height:s,actualWidth:r,actualHeight:a})},resizeRenderedImageToViewPort:function(){var t,i=e.getMetrics(),o=i.width/i.height,n=this.figureImage.getMetrics();this.figureImage.getRatio()<o?(t=n.height<i.height?n.height:i.height,this.figureImage.setRenderedSizeByHeight(t)):this.figureImage.getRatio()>=o&&(t=n.width<i.width?n.width:i.width,this.figureImage.setRenderedSizeByWidth(t))},setRenderedImagePositionByCurrentViewPort:function(){var t=e.getMetrics();this.figureImage.setRenderedPositionFromViewPortMetric(t)},redrawImage:function(t,e){var i=this,o=i.figureImage,n=o.getRenderedPosition(),s={position:"absolute",top:n.y,left:n.x,width:o.getRenderedWidth(),height:o.getRenderedHeight()};t?o.getImage().animate(s,i.animationDuration,i.animationEasing,e):o.getImage().css(s)},animateShow:function(){var t=this.$figureZoomer.find("img");t.css({opacity:1,visibility:"visible"})},mouseWheelEventHandler:function(e,i,o,n){var s=n>0?"zoomIn":"zoomOut";e.stopPropagation(),e.preventDefault(),t(e.currentTarget).trigger("figureZoomer."+s,{deltaY:n})},zoomInEventHandler:function(){var t=this,e=t.figureImage.getImage();t.panningInvoked||(n(t),t.panningInvoked=!0),t.zoomMode=!0,t.zoomOutLimitedReached=!1,t.animating&&(e.stop(!0,!1),t.animating=!1),null===t.zoomImageData&&t.initZoomData(),t.zoomImageData.zoomDataInBy(t.zoomIncrement),t.figureImage.setRenderedWidth(t.zoomImageData.newWidth),t.figureImage.setRenderedHeight(t.zoomImageData.newHeight),t.figureImage.setRenderedPosition(t.zoomImageData.getPosition()),t.animating=!0,t.redrawImage(!0,function(){t.zoomImageData.newWidth>t.zoomImageData.preZoomWidth&&t.$figureZoomer.trigger("figureZoomer.loadZoomerImage"),t.animating=!1})},zoomOutEventHandler:function(){var t=this,e=t.figureImage.getImage();t.zoomOutLimitedReached||(t.animating&&(e.stop(!0,!1),t.animating=!1),null===t.zoomImageData&&t.initZoomData(),t.zoomImageData.zoomDataOutBy(t.zoomIncrement),t.zoomImageData.newWidth<=t.zoomImageData.preZoomWidth&&(t.zoomOutLimitedReached=!0,t.zoomMode=!1),t.figureImage.setRenderedWidth(t.zoomImageData.newWidth),t.figureImage.setRenderedHeight(t.zoomImageData.newHeight),t.figureImage.setRenderedPosition(t.zoomImageData.getPosition()),t.animating=!0,t.redrawImage(!0,function(){t.zoomOutLimitedReached?(t.zoomImageData.resetImageData(),t.figureImage.setRenderedPosition(t.zoomImageData.getPosition()),t.resizeRenderedImageToViewPort(),t.setRenderedImagePositionByCurrentViewPort(),t.zoomImageData=null,t.redrawImage(!0,function(){t.animating=!1,t.zoomOutLimitedReached=!1})):t.animating=!1}))},viewPortChangeEventHandler:function(t,i){var o,n=this;e.setMetrics(),e.getMetrics(),n.setRenderedImagePositionByCurrentViewPort(),n.zoomImageData&&(o=n.figureImage.getRenderedPosition(),n.zoomImageData.setPosition(o)),i&&i.hasOwnProperty("animateShow")&&i.animateShow===!0?(n.redrawImage(!1),n.animateShow()):n.redrawImage(!0)},loadZoomImageEventHandler:function(){var e,i=this;i.zoomerImageURL&&(e=t('<img class="figure-zoomer__hiddden-image" src="'+i.zoomerImageURL+'" style="display: none;"/>'),i.$figureZoomer.append(e),e.on("load",function(){var t=e.outerWidth(),o=e.outerHeight(),n=setInterval(function(){i.animating||(window.clearInterval(n),null!==i.zoomImageData&&(i.zoomImageData.actualWidth=t,i.zoomImageData.actualHeight=o,i.figureImage.getImage()[0].src=i.zoomerImageURL,i.$figureZoomer.off("figureZoomer.loadZoomerImage")))},10)}))}},s}),WILEY.define("modules/figure-viewer",["common/modules/jquery-loader","common/facades/pubsub","common/modules/modal","common/modules/utilities","modules/figure-component","exports","common/facades/scrollable"],function(t,e,i,o,n,s){"use strict";s=s||{};var r,a,l,c=function(e){var i="figure-viewer__figure-container--active",o=r.find(".figure-viewer__horizontal-figures-scroller-container");o.find("."+i).removeClass(i),t(e).addClass(i)},h=function(e){var i=t(o.getActiveFigureId()),n=i.index(),s={delay:0,animate:!1,fixZoom:e||!1};u(n),l[o.getActiveFigureIdSansHash()].show(s),c(o.getActiveFigureId())},d=function(t){var e=r.find(".figure-viewer__horizontal-figures-scroller"),i=e.find("img");t?Modernizr.csstransitions?(e.css("visibility","visible"),e.css("opacity",1),i.css("visibility","visible")):setTimeout(function(){e.css("visibility","visible"),e.css("opacity",1),i.css("visibility","visible")},300):(e.css({opacity:0,visibility:"hidden"}),Modernizr.csstransitions||i.css("visibility","hidden"))},u=function(t){var e=r.find(".figure-viewer__vertical-figures-wrapper"),i=r.find(".figure-viewer__vertical-figures-container"),o=i.find("li"),n=o.eq(t),s="figure-viewer__figures-item--selected";e.length&&(o.removeClass(s),n.addClass(s),i.scrollable("scroll",parseInt(n.position().top,10)))},f=function(e){var i=t(e.currentTarget),n=i.attr("href"),s=t(n),r=s.find(".figure-viewer__caption-container, .figure-viewer__nav-container"),a=s.index(),h={delay:10,animate:!1,callback:function(){r.fadeIn(1e3)}};e.preventDefault(),u(a),l[n.replace("#","")].show(h),c(n),o.setActiveFigureId(n)},m=function(e){var i=t(e.currentTarget),n=i.attr("href"),s=t(n),r=s.find(".figure-viewer__caption-container, .figure-viewer__nav-container"),a=s.index(),h=t(o.getActiveFigureId()),d=h.find(".figure-viewer__caption-container, .figure-viewer__nav-container"),f={delay:0,animate:!0,callback:function(){r.fadeIn(200)}};e.preventDefault(),u(a),r.fadeOut(0),d.fadeOut(200,function(){l[n.replace("#","")].show(f)}),c(n),o.setActiveFigureId(n)},p=function(t,e){Modernizr.csstransitions?t.css("margin-left",e):t.animate({marginLeft:e},200)},g=function(){var e=r.find(".figure-viewer__figure-container");e.each(function(){t(this).find(".figure-viewer__caption").scrollable("update")})},v=function(t,e,i){var o="Hide",n="icon__chevron-left",s=0,a="icon__chevron-right";e.hasClass("js-figure-viewer__navigation--inactive")||(o="Show",n="icon__chevron-right",s=-e.width(),a="icon__chevron-left"),d(),p(e,s),e.find(".js-display__control-text").text(o),i.find(".icon").addClass(n).removeClass(a),e.toggleClass("js-figure-viewer__navigation--inactive"),r.find(".js-figure-zoomer").first().trigger("figureImage.viewPortChange"),setTimeout(function(){y(),d(!0),h(!0),g(),e.toggleClass("js-figure-viewer__navigation--active")},400),t.preventDefault()},b=function(e){var i,o="";o+='<button type="button" class="figure-viewer__figures-list-control button__link">',o+='<span class="icon icon__chevron-left"></span>',o+='<span class="js-display__control-text">',o+="Hide",o+="</span>",o+='<span class="is-accessible"> figure viewer thumbnails</span>',o+="</button>",i=t(o),i.on("click",function(t){v(t,e,i)}),e.prepend(i)},_=function(){var t=r.find(".figure-viewer__vertical-figures-wrapper"),e=r.find(".figure-viewer__vertical-figures-container"),i=r.find(".figure-viewer__vertical-figures-wrapper:visible").length;t.length&&i&&(t.addClass("js-figure-viewer__navigation--active"),e.scrollable(),b(t),e.on("click","a",f))},w=function(){var e=r.find("figcaption a"),i=r.find(".figure-viewer__figure-container");e.each(function(e,o){o.hash.replace(/^(?:#)(.+)$/,function(e,n){i.each(function(){t(this).get(0).id==="figure-viewer-"+n&&t(o).attr("href","#figure-viewer-"+n).addClass("js-navigate-figure-in-viewer")})})}),r.find("figcaption a.js-navigate-figure-in-viewer").on("click",f)},y=function(){var t=r.find(".figure-viewer__horizontal-figures-scroller-container"),e=r.find(".figure-viewer__figure-container"),i=r.find(".figure-viewer__vertical-figures-wrapper"),o=i.hasClass("js-figure-viewer__navigation--inactive")?r:t,n=e.length*(o.width()+5);r.find(".figure-viewer__horizontal-figures-scroller").css({width:n+"px"}),e.width(o.width())},k=function(){var e=r.find(".figure-viewer__horizontal-figures-scroller-container"),i=e.find("img");i.one("load",function(){var e=t(this),i=e.closest(".figure-viewer__figure-container"),s=i.attr("id");l.hasOwnProperty(s)||(l[s]=new n(s)),l[s].loadImage(),s===o.getActiveFigureIdSansHash()&&h()}).each(function(){this.complete&&t(this).load()})},x=function(){var t=r.find(".figure-viewer__horizontal-figures-scroller");P(),y(),k(),g(),w(),t.on("click",".icon__figure-viewer-arrow",m)},C=function(){window.location.hash=o.getActiveFigureId(),window.location.reload()},I=function(e){var i=t("#figure-viewer .figure-viewer__figure-container--active"),o=".figure-viewer__figure-";switch(e){case"keyboard:right":o+="next";break;case"keyboard:left":o+="previous";break;case"keyboard:up":o+="zoom-in";break;case"keyboard:down":o+="zoom-out"}i.find(o).trigger("click")},$=function(){e.unsubscribe("keyboard:left",I),e.unsubscribe("keyboard:right",I),e.unsubscribe("keyboard:down",I),e.unsubscribe("keyboard:up",I),l=null},j=function(){var t=!!r.parents("[id^=colorbox]").length||!!r.parents("[id=js-mobile-panel]").length;e.subscribe({"keyboard:left":I,"keyboard:right":I,"keyboard:down":I,"keyboard:up":I,"modal.unsubscribe":$}),t||e.subscribe({resizing:C})},P=function(){var t=r.find(".figure-viewer__figure-container").first(),e=t.find(".figure-viewer__figure-image-container"),i=(r.find(".figure-viewer__caption-container").first(),r.find(".figure-viewer__vertical-figures-wrapper")),o=parseInt(e.css("margin-left"),10),n=parseInt(e.css("margin-right"),10),s=r.width()-o-n,l=t.height();i.hasClass("js-figure-viewer__navigation--inactive")||i.is(":hidden")||(s-=i.width()),a={width:s,height:l}},T=function(e){var i;return r=t(e),l={},/small/.test(o.getViewState())&&r.addClass("caption-hidden"),r.hasClass("js-break-out-mode")&&(i=window.location.hash?window.location.hash:"#"+r.find(".figure-viewer__figure-container").first().attr("id"),o.setActiveFigureId(i)),_(),x(),j(),s};return s.setMetrics=function(){P()},s.getMetrics=function(){return a},T}),WILEY.define("modules/figure-viewer-modal",["common/modules/jquery-loader","common/modules/utilities","common/modules/controller","common/facades/pubsub","common/modules/modal","common/utilities/dom","common/utilities/ie","jquery-scrollto"],function(t,e,i,o,n,s,r){"use strict";var a=s.get(window),l=a.width(),c=a.height(),h=function(e){var i=t("<div />");return i=i.prepend(t(e)).find("#figure-viewer")},d=function(e){n.update({html:e}),t(".js-close-modal-link").on("click",function(t){t.preventDefault(),n.close()})},u=function(){var i=t("#figure-viewer");return i.find("#js-figure-viewer").removeClass("js-break-out-mode").on("click",function(i){var s,r,l=t(i.target),c=l.attr("href");l.hasClass("figure-viewer__controls-break-out")?(l[0].href+=e.getActiveFigureId(),o.publish("modal.close")):l.hasClass("figure-viewer__controls-close-box")?(i.preventDefault(),o.publish("modal.close")):l.hasClass("js-figure-viewer__navigate-to")&&(i.preventDefault(),o.publish("modal.unsubscribe"),n.close({event:i,callback:function(){var e;t(c).parents(".article-section--data-analyses").length?(e=Modernizr.touch?1e3:1,r=t(".article-section--data-analyses").find('.figureLink[href="'+c+'"]').first(),s=t(c+":visible").length,s||r.trigger("click"),setTimeout(function(){a.scrollTo(r,400)},e)):a.scrollTo(t(c),400)}}))}),i},f=function(){o.subscribe({resizing:v,"modal.close":g,"modal.unsubscribe":m,"keyboard:escape":g})},m=function(){o.unsubscribe("resizing",v),o.unsubscribe("modal.close",g),o.unsubscribe("keyboard:escape",g)},p=function(){return t("#js-mobile-panel").length},g=function(){p()||n.close(),o.publish("modal.unsubscribe")},v=function(i){var s=a.width(),r=a.height(),h=Math.abs(s-l),d=Math.abs(r-c),u=e.getActiveFigureId().replace("figure-viewer-","");(h>10||d>20)&&(o.publish("modal.unsubscribe"),n.close({event:i,callback:function(){t(u).find("a.inline-figure__image-link").trigger("click")}})),l=s,c=r},b=function(e){this.$link=t(e),r.is(8)?this.$link.attr("target","_blank"):(this.endpoint=this.$link.attr("data-modal-href")||this.$link.attr("href"),this.$link.on("click",t.proxy(this.open,this)))};return b.prototype={open:function(o){var s,r=e.getAjaxEndPoint(this.endpoint),a=t(o.currentTarget).attr("href"),l=/#figure-viewer-/;o.preventDefault(),s=a.match(l)?a.split(l).pop():t(".article-section--inline-figure").first().attr("id"),e.setActiveFigureId("#figure-viewer-"+s),n.open({onstart:function(){r.then(function(o,s,r){if("FORBIDDEN"===r.getResponseHeader("ACCESS_STATUS"))return void location.reload();var a,l,c=t(o),m="";c.find("#figure-viewer")?(a=h(o),l=a.find(".figure-viewer__contents-title").text(),n.update({html:a,titleMobile:/small/.test(e.getViewState())?"Figure Viewer":l}),i.set(a),u(),f()):(m+='<button class="js-close-modal-link button__link">Close this dialog</button>',m="<p>It appears that your session has ended. "+m+", login and try again.</p>",m+="<p>If the problem persists, please notify customer services.</p>",m='<div class="figure-viewer__error-msg">'+m+"</div>",d(m))}).fail(function(){var t="";t+='<button class="js-close-modal-link button__link">Close this dialog</button>',t="<p>There has been an unexpected error. "+t+" and try again.</p>",t+="<p>If the problem persists, please notify customer services.</p>",t='<div class="figure-viewer__error-msg">'+t+"</div>",d(t)})},titleMobile:"Figure Viewer",fixedPane:!0,showCloseButton:!1})}},b}),WILEY.define("modules/toolbar",["common/modules/jquery-loader","common/facades/pubsub","common/modules/utilities","common/utilities/dom","common/utilities/ie"],function(t,e,i,o,n){"use strict";var s={body:o.get("body"),document:o.get(document),journal:t(".js-journal"),mobile:{},toolbar:o.get("#js-article-tools"),viewport:o.get("#js-viewport-mini"),window:o.get(window),footer:o.get("#region__footer"),skyscraper:t("#skyscraper")},r={8:{left:"auto"}},a=s.toolbar.hasClass("toolbar--restricted-access"),l={access:"is-accessible",bar:"article-tools__bar",icon:{active:"icon__tool-toggle--active",base:"icon",toggle:"icon__tool-toggle"},list:"article-tools__list",mobile:{absolute:"article-tools__mobile-toolbar-absolute",absoluting:"article-tools__is-mobile-absolute",active:"article-tools__mobile-toolbar-toggle--active",fixed:"article-tools__is-mobile-fixed",js:"js-mobile-toolbar",list:"article-tools__list--mobile",listed:"article-tools__list--mobile-active",toggle:"article-tools__mobile-toolbar-toggle",toolbar:"article-tools__mobile-toolbar",toolset:"article-tools__tool--set"},fixed:"article-tools__is-fixed"},c={tools:"Article Tools"},h={toolbar:s.toolbar.outerHeight(!0)},d=function(e){var i=["xxs","xs","s","m"];return t.inArray(e,i)>-1},u=function(){return s.viewport.offset().top},f=function(e){var i="";switch(e){case"mobile":i+='<div id="'+l.mobile.js+'" class="'+l.mobile.toolbar+'">',i+='   <div class="'+l.mobile.toggle+'">',i+='       <span class="'+l.icon.base+" "+l.icon.toggle+'"></span>',i+='       <span class="'+l.access+'">'+c.tools+"</span>",i+="   </div>",i+='   <ul class="'+l.bar+" "+l.mobile.list+'"></ul>',i+="</div>"}return t(i)},m=function(){s.toolbar.removeClass(l.fixed),a&&s.toolbar.removeAttr("style")},p=function(){var t,e,o=i.isInViewport(s.footer),n=s.footer.offset().top,r=20,a=s.document.height()-s.window.scrollTop()-s.window.height();i.getDockHeightInViewM()&&o&&s.toolbar.outerHeight()+s.skyscraper.outerHeight()>n-s.window.scrollTop()?(t=s.footer.outerHeight()-a+r+s.skyscraper.outerHeight(),e="auto"):(t="",e=""),s.toolbar.css({bottom:t,top:e})},g=function(){e.unsubscribe("scrolling",D)},v=function(t){t=t.split(".")[2],d(t)?("xxs"===t&&_(),b()):g()},b=function(){Modernizr.touch?(s.document.off("touchstart touchmove",j),s.document.off("scroll",j),s.toolbar.removeClass(l.mobile.absoluting).css("top","auto"),s.toolbar.off("touchstart touchmove",P)):(e.unsubscribe("scrolling",w),e.unsubscribe("resizing",w),s.toolbar.removeClass(l.fixed).removeAttr("style"))},_=function(){s.toolbar.find("."+l.bar).prepend(s.mobile.wrap.find("."+l.mobile.toolset)),s.mobile.toolbar.remove(),s.mobile={},s.document.off("touchstart touchmove scroll",I),e.unsubscribe("resizing",I)},w=function(){var t;i.getPositionWin()>u()?(t="addClass",$()):(t="removeClass",s.toolbar.removeAttr("style")),s.toolbar[t](l.fixed)},y=function(){s.toolbar.addClass(l.fixed)},k=function(){e.subscribe({"orientation.change":function(){s.body.hide().fadeIn("fast",function(){s.document.trigger("touchstart")})},"state.match":T,"state.unmatch":v,"toolbar.docked":y,"toolbar.scrolled":m})},x=function(){var t=s.mobile;t.toolbar=f("mobile"),t.toggle=t.toolbar.find("."+l.mobile.toggle),t.wrap=t.toolbar.find("."+l.mobile.list),t.wrap.append(s.toolbar.find("."+l.mobile.toolset)),s.viewport.append(t.toolbar),t.toggle.on("click",C),Modernizr.positionfixed?t.toolbar.show():(s.document.on("touchstart touchmove scroll",I),e.subscribe("resizing",I),setTimeout(function(){s.document.trigger("scroll")},100))},C=function(){var t,e,i=s.mobile;i.toggle.toggleClass(l.mobile.active),i.toggle.find("."+l.icon.toggle).toggleClass(l.icon.active),Modernizr.csstransitions?i.wrap.toggleClass(l.mobile.listed):(t=i.toggle.hasClass(l.mobile.active)?0:-s.viewport.width(),e=i.toggle.hasClass(l.mobile.active)?"100%":0,i.wrap.animate({left:t,width:e}))},I=function(){var t=s.window.height(),e=s.window.scrollTop(),i=s.viewport.offset().top,o=t<=i+50&&e<80?25:e-i+t-13;s.mobile.toolbar.hide().addClass(l.mobile.absolute).css({top:o}).fadeIn("fast")},$=function(){s.toolbar.css({width:s.journal.width()+2})},j=function(t){var e={window:i.getPositionWin(),view:u()},o=e.window>e.view,n="removeClass",r={top:s.toolbar.outerHeight()*-1};o&&(n="addClass",r={top:e.window-e.view-s.toolbar.outerHeight()}),Modernizr.positionfixed?(s.toolbar[n](l.mobile.fixed),o&&$(),o||s.toolbar.removeAttr("style")):"touchstart"!==t.type&&"touchmove"!==t.type||!o?s.toolbar[n](l.mobile.fixed).css(r).fadeIn("fast"):s.toolbar.hide()},P=function(t){t.stopPropagation()},T=function(t){t=t.split(".")[2],d(t)?("xxs"===t&&x(),h.toolbar=s.toolbar.outerHeight(!0),z()):(h.toolbar=0,D())},z=function(){Modernizr.touch?(s.toolbar.on("touchstart touchmove",P),s.document.on("touchstart touchmove scroll",j),s.document.trigger("scroll")):(e.subscribe("scrolling",w),e.subscribe("resizing",w),e.publish("scrolling"))},L=function(){var t,o;i.getDockHeightInViewM()?s.toolbar.hasClass(l.fixed)||(t="toolbar.docked"):t="toolbar.scrolled",p(),t&&e.publish(t),n.is(8)&&(o="auto",s.toolbar.hasClass(l.fixed)&&s.window.scrollLeft()>0&&(o=s.window.scrollLeft()*-1),o!==r[8].left&&(s.toolbar.css("marginLeft",o),r[8].left=o))},D=function(){L(),e.subscribe("scrolling",L)},M=function(){k(),a&&z()};return M.getHeight=function(){return h.toolbar},M}),WILEY.define("modules/footer",["common/modules/jquery-loader","common/modules/accordion","common/facades/pubsub","modules/toolbar","jquery-scrollto"],function(t,e,i,o){"use strict";var n=function(o){var n=this;n.duration=500,i.subscribe({"footer.expand":function(o){e.expand(o.elements,n.duration),o.title&&t(o.title).addClass("js-footer-title--active"),i.once("accordion.slideDown.complete",function(){var e=t(o.elements).hasClass("js-footer-control")?t(o.elements).closest(".article-footer__section"):t(o.target);n.doTheScroll(e),o.elements.addClass("js-footer-info--active")})},"footer.collapse":function(i){e.collapse(i.elements,n.duration),i.title&&t(i.title).removeClass("js-footer-title--active"),setTimeout(function(){i.elements.removeClass("js-footer-info--active")},n.duration)}}),i.subscribe({"target-footer-toggle-section":function(e){var i=t(e.scrollTarget);t(e.currentTarget).closest(".js-footer-title").length?n.toggleSection(i):n.expand(i)}}),n.setControls(o),n.collapseAll(o)};return n.prototype={doTheScroll:function(e,i){var n=this,s=o.getHeight();s>0&&(e=e.offset().top-s+"px"),t.scrollTo(e,n.duration,function(){i&&"function"==typeof i&&i()})},toggleSection:function(t){var e,o={title:t.hasClass("js-footer-title")?t:t.find(".js-footer-title"),elements:t.find(".js-footer-info"),target:t};o.elements.length&&(e=o.title.hasClass("js-footer-title--active")?"collapse":"expand",i.publish("footer."+e,o))},expand:function(t){var e=t.closest(".article-footer__section"),o=e.length?e.find(".js-footer-title"):t.find(".js-footer-title"),n=e.length?e.find(".js-footer-info"):t.find(".js-footer-info"),s={title:o,elements:n,target:t};s.elements.length&&s.elements.is(":hidden")?i.publish("footer.expand",s):this.doTheScroll(t)},setControls:function(e){var i=t(e),o=i.find(".js-footer-title");o.each(function(){var e=t(this),i=e.parents("[id]").attr("id");e.wrapInner('<a href="#'+i+'" class="js-scrollto js-footer-control" data-scroll-to-target="'+i+'" />')}),Modernizr.touch||t(".js-footer-control").addClass("js-footer-control--hover")},collapseAll:function(e){var o;t(e).find(".js-footer-title").each(function(){o={},o.elements=t(this).next(".js-footer-info"),o.elements.length&&!o.elements.hasClass("js-footer-info--active")&&i.publish("footer.collapse",o)})}},n}),WILEY.define("modules/notes",["common/modules/jquery-loader","common/facades/pubsub","common/modules/utilities","common/modules/mobile-panel","common/modules/controller","common/utilities/dom","common/facades/scrollable"],function(t,e,i,o,n,s){"use strict";var r=s.get("body"),a=t("#main-content"),l=r.data("initTableScroll"),c={link:"js-link__note--active",tooltip:"note-tooltip--active"},h=function(e){var i=!!e&&t(e.target),o=!0;return i&&i.hasClass("icon__close")?(e.preventDefault(),e.stopPropagation()):i&&i.closest(".note-tooltip").length?o=!1:e&&"keyup"===e.type&&27!==e.which&&(o=!1),o},d=!1,u=!1,f=function(e){var i;if(t(e).hasClass("article-section__footnotes")&&!d)i=t(".js-link__footnote"),this.name="Footnote",d=!0;else{if(!t(e).hasClass("article-section__notes")||u)return;i=t(".js-link__note"),this.name="Note",u=!0}i.on("click",t.proxy(this.showTooltip,this))};return f.prototype={fadeInTooltip:function(){Modernizr.csstransitions||(f.$tooltip.fadeIn("fast"),f.$link.children(".icon__chevron-down").fadeIn("fast")),f.$tooltip.addClass(c.tooltip),f.$link.addClass(c.link),f.$tooltip.find(".icon__close").focus()},fadeOutTooltip:function(e){h(e)&&(this.isAnimating=!0,Modernizr.csstransitions?(f.$link.removeClass(c.link),f.$tooltip.removeClass(c.tooltip),setTimeout(t.proxy(this.resetTooltip,this),400)):(f.$link.children(".icon__chevron-down").fadeOut("fast",t.proxy(function(){f.$link.removeClass(c.link)},this)),f.$tooltip.fadeOut("fast",t.proxy(this.resetTooltip,this)),f.$link.removeClass(c.link)))},hideTooltip:function(){f.$tooltip&&(f.$link.focus(),f.$link.removeClass(c.link),this.resetTooltip())},openInMobilePanel:function(){var e={content:"<p>"+t(f.$link.attr("href")).html()+"</p>",position:"right",title:this.name+" "+f.$link.text()};o.open(e)},resetTooltip:function(){f.$link&&(f.$link.children(".icon__chevron-down").remove(),f.$tooltip.remove(),delete f.$tooltip,delete f.$link,e.unsubscribe("resizing",this.fadeOutTooltip),r.off("click keyup",this.fadeOutTooltip),this.isAnimating=!1)},fixOL23340:function(){var e=f.$tooltip.find(".table__overflow"),i="";e.length&&(l?e.each(function(){i+='<div class="table__overflow js-module" data-module="Table">',i+=t(this).scrollable("content").html(),i+="</div>"}):e.each(function(){i+='<div class="table__overflow">',i+=t(this).html(),i+="</div>"}),e.remove(),f.$tooltip.find(".note-tooltip__wrapper").append(i))},setTooltip:function(){var e="",i=parseInt(a.css("padding-left"),10),o=f.$link.attr("href");e+='<span id="js-note-tooltip" class="note-tooltip">',e+='<span class="note-tooltip__wrapper">',e+='<button type="button" class="icon icon__close button__link">',e+='<span class="is-accessible">Close tooltip</span>',e+="</button>",e+='<span class="icon icon__chevron-down"></span>',e+="</span>",e+="</span>",f.$tooltip=t(e),f.$tooltip.find(".note-tooltip__wrapper").append(t(o).contents().clone(!0)),f.$tooltip.find(".icon__close").on("click",t.proxy(this.fadeOutTooltip,this)),a.append(f.$tooltip),this.fixOL23340(),n.set(f.$tooltip[0]),f.$tooltip.find(".icon__chevron-down").css({left:f.$link.position().left}),setTimeout(function(){f.$tooltip.css({left:i,top:f.$link.offset().top-a.offset().top-f.$tooltip.outerHeight(),width:a.width()})},10)},showTooltip:function(o){var n=t(o.currentTarget),s=(i.getViewState(),n.hasClass(c.link));if(o.preventDefault(),o.stopPropagation(),!this.isAnimating&&(this.hideTooltip(),!s)){if(f.$link=n,/extra-small/.test(i.getViewState()))return void this.openInMobilePanel();
this.setTooltip(),this.fadeInTooltip(),r.on("click keyup",t.proxy(this.fadeOutTooltip,this)),e.subscribe("resizing",t.proxy(this.hideTooltip,this))}}},f}),WILEY.define("modules/infopane",["common/modules/jquery-loader","common/modules/utilities","common/utilities/dom","common/utilities/ie","common/facades/pubsub","common/modules/mobile-panel","modules/notes","modules/routes","common/modules/router","common/modules/accordion","common/modules/controller","common/facades/scrollable","jquery-colorbox"],function(t,e,i,o,n,s,r,a,l,c,h){"use strict";var d={"active-content":"article-support__pane-content--active","active-link":"article-support__item-link--is-active","active-section":"article-support__section--is-active","active-title":"article-support__pane-title-bar--active","open-state":"article-support__list-wrapper--open-pane","section-transition":"article-support__section--is-transition",fixed:"is-fixed",bottom:"is-bottom",hidden:"is-hidden"},u={html:i.get("html"),window:i.get(window),footer:i.get("#region__footer")},f={8:{left:"auto"}},m={Information:"Information",PDF_options:"PDF Options",References:"References",Tables:"Tables"},p=function(){var t=this.paneOptions.scrollTo?this.$infoContent.find(this.paneOptions.scrollTo):null;this.$wrapper.addClass(d["open-state"]),this.$infoTitle.parent("div").addClass(d["active-title"]),this.$infoContent.addClass(d["active-content"]),this.setScrollbars(),this.$infoContent.scrollable("scroll",0),this.isOpen=!0,this.$component.addClass("article-support--open").removeClass("article-support--closed"),this.isToggling=!1,t&&this.scrollToTarget(t)},g=function(){this.$wrapper.removeClass(d["open-state"]),this.$infoPane.addClass("is-hidden"),this.$infoPane.removeClass("article-support__pane--transform"),this.$infoLinks.removeClass("article-support__links--transform"),this.$infoLinks.removeAttr("style"),this.$infoList.removeAttr("style"),this.$infoContent.scrollable("content").empty(),this.isOpen=!1,this.$component.addClass("article-support--closed").removeClass("article-support--open"),this.isToggling=!1},v=function(){this.$journal=t(".js-journal"),this.$info=t(".js-article-support"),this.$infoContainer=this.$info.closest(".l-article"),this.$infoLinks=this.$info.find(".js-article-support-links"),this.$infoList=this.$infoLinks.find(".js-article-support-list"),this.$infoPane=this.$info.find(".js-article-support-pane"),this.$infoTitle=this.$infoPane.find(".js-article-support-title"),this.$infoContent=this.$infoPane.find(".js-article-support-content"),this.$wrapper=this.$infoLinks.find(".js-article-support-list-wrapper"),this.$pdf=this.$infoList.find('.article-support__item-link[data-support-type="PDF_options"]'),this.$close=this.$infoPane.find(".article-support__pane-close__link")},b=function(e){var i,o=t(e.currentTarget),n=t(o.prop("hash"));e.preventDefault(),n.one("accordionSlideCompleteEvent",t.proxy(this.setScrollbars,this)),n.one("accordionSlideCompleteEvent",function(){i=n.is(":visible")?"addClass":"removeClass",o.children(".icon")[i]("icon__double-chevron-references--expanded")}),c.toggle(n)},_=function(i){var o=t(i);return o.find("h4.reference__title").each(function(e){var i=t(this),o="references-subsection__"+e,n=i.next(".article-info__section-content"),s=t('<span class="icon icon__double-chevron-references--expanded icon__double-chevron-references"></span>');0!==e&&(n.hide(),s.removeClass("icon__double-chevron-references--expanded")),i.wrapInner('<a class="reference__title-link" href="#'+o+'"></a>').children().prepend(s),n.attr("id",o).addClass("js-accordion__body")}),e.getHTML(o)},w=function(i){this.$component=t(i);var o=t(".article-section__references"),n=t(".article-section__references-list"),s=o.find(".js-footer-info").children(".bibSection"),r="";s.length?(s.each(function(){r+=e.getHTML(t(this))}),r=_(r)):n.each(function(){r+=e.getHTML(t(this))}),v.call(this),this.$contentInformation=t(".js-article-info").clone(!0),t(".js-article-info").parents(".article-footer__section").remove(),this.$contentReferences=r,e.uniqueifyHTML(n),this.$contentTables=t(".js-article-tables").clone(!0),t(".js-article-tables").parents(".article-footer__section").remove(),e.uniqueifyHTML(n),this.$component.addClass("article-support--closed").removeClass("article-support--open"),this.isOpen=!1,this.isToggling=!1,this.animationDuration=250,this.paneOptions={},this.infoPaneWidth=this.$infoPane.width(),this.infoLinksMarginR=parseInt(this.$infoLinks.css("margin-right"),10),this.infoPaneMarginT=parseInt(this.$infoPane.css("margin-top"),10),this.infoListWidth=60,this.infoListWidthWide=115,this.init()};return w.prototype={init:function(){var i="click",o=this;n.subscribe({resizing:t.proxy(this.resizeHandler,this),scrolling:t.proxy(this.dockOrScroll,this),"state.unmatch.s":t.proxy(this.resetMobileState,this),"state.unmatch.m":t.proxy(this.resetMobileState,this),"state.unmatch.xs":t.proxy(this.resetMobileState,this),"state.unmatch.xxs":t.proxy(this.resetMobileState,this),"state.match":t.proxy(this.setMatchedState,this),"state.match.s":t.proxy(this.setMobileState,this),"state.match.m":t.proxy(this.setMobileState,this),"state.match.xs":t.proxy(this.setMobileState,this),"state.match.xxs":t.proxy(this.setMobileState,this),"infopane.toggle":t.proxy(this.toggleInfoPane,this),"infopane.hide":t.proxy(this.hideInfoPane,this),"infopane.show":t.proxy(this.showInfoPane,this),"infopane.hideComplete":t.proxy(g,this),"infopane.showComplete":t.proxy(p,this)}),l.set(a.references,function(){t('.js-infopane-toggle[data-support-type="References"]').eq(0).trigger("click")}),this.$infoLinks.on(i,".js-infopane-pdf",{publisher:"infopane.toggle"},function(i){var n;o.$contentPDFoptions=t(".js-pdf-content").children().clone(!0),o.$PDFLinks=o.$contentPDFoptions.find(".box-actions ").find(".js-article-section__pdf-container-link").not(".js-readcube-pdf"),n=o.$contentPDFoptions.find(".box-actions ").find(".js-readcube-pdf"),1!==o.$PDFLinks.length||/small/.test(e.getViewState())?(o.publishOptions(i),o.$EPDFLinks=o.$infoPane.find(".box-actions ").find(".js-readcube-pdf"),o.$EPDFLinks.on("click",function(){o.reportingEpdf(this)})):n.length&&o.reportingEpdf(n)}),this.changePdfLinks(),u.html.hasClass("readcubeEpdfEnabled")?(t("a.js-standard-pdf").hide(),t("a.js-readcube-pdf").show()):(t("a.js-readcube-pdf").hide(),t("a.js-standard-pdf").show()),this.$infoLinks.on(i,".js-infopane-toggle",{publisher:"infopane.toggle"},t.proxy(this.publishOptions,this)),t(".js-funding-info, .js-publication-history, .js-update-status").on(i,{publisher:"infopane.show",type:"Information",scrollTo:!0},t.proxy(this.publishOptions,this)),t(".js-article-support-close").on(i,"a",{publisher:"infopane.hide"},t.proxy(this.publishOptions,this)),t(".js-link__reference").on(i,{publisher:"infopane.show",type:"References",scrollTo:!0},t.proxy(this.publishOptions,this)),this.dockOrScroll(),this.reportingEpdf()},resetMobileState:function(){this.$info.appendTo(i.get("#js-viewport-mini ").find(".l-article-support"))},setMobileState:function(){this.$info.removeClass(d.fixed).prependTo(i.get("#js-article-tools")).fadeIn("fast")},publishOptions:function(e){e.preventDefault();var i=t(e.currentTarget),o=e.data,s={},r=o.type?o.type:null,a=o.scrollTo?i.attr("href"):null,l=i.data("support-type"),c=o.publisher;l&&(r=l),s.type=r,s.duration=this.animationDuration,s.elm=i,r&&t.extend(s,{content:this["$content"+r.replace("_","")],elm:this.$infoLinks.find('[data-support-type="'+r+'"]'),title:m[r],scrollTo:a}),this.paneOptions=s,n.publish(c,this.paneOptions)},scrollToTarget:function(t){var e=this,i=t.closest(".js-accordion__body"),o=function(){e.setScrollbars(),e.$infoContent.scrollable("scroll",t),setTimeout(function(){t.addClass(d["active-section"]),setTimeout(function(){t.removeClass(d["active-section"])},2e3)},10)};t.addClass(d["section-transition"]),i.length?(n.once("accordion.slideDown.complete",o),c.expand(i),i.prev(".reference__title").find(".icon").toggleClass("icon__double-chevron-references--expanded")):o()},setMatchedState:function(t){this.state=t.replace("state.match.","")},dockOrScroll:function(){var e,n=t(document).scrollTop(),s=n-this.$journal.offset().top>0,r=n+this.$info.height()>this.$infoContainer.offset().top+this.$infoContainer.height(),a=this.$info.parents("#js-article-tools").length,l=this.$infoContainer.offset().top+this.$infoContainer.height()===0&&!i.get("#js-article-tools").hasClass("article-tools__is-fixed");this.isInfoPaneHidden()||this.setInfoPanePosition(),r?(this.isInfoPaneBottom()||a||this.$info.addClass(d.bottom).removeClass(d.fixed),l&&this.$info.removeClass(d.bottom)):s?this.isInfoPaneDocked()||a||this.$info.addClass(d.fixed).removeClass(d.bottom):this.$info.removeClass(d.fixed,d.bottom),this.setInfoLinksPosition(),o.is(8)&&(e="auto",this.$info.hasClass(d.fixed)&&u.window.scrollLeft()>0&&(e=u.window.scrollLeft()*-1),e!==f[8].left&&(this.$info.css("left",e),f[8].left=e))},isInfoPaneDocked:function(){return this.$info.hasClass(d.fixed)},isInfoPaneBottom:function(){return this.$info.hasClass(d.bottom)},toggleInfoPane:function(){this.isToggling||(this.paneOptions.elm.hasClass(d["active-link"])||"close"===this.paneOptions.elm.data("close")?(this.hideInfoPane(),this.$pdf.focus()):(this.$infoTitle.parent("div").removeClass(d["active-title"]),this.$infoContent.removeClass(d["active-content"]),this.showInfoPane(),this.$close.focus()))},showInfoPane:function(){this.stateWhenOpened=this.state,this.isInfoPaneHidden()?"xxl"===this.state||"xl"===this.state||"l"===this.state?(this.prepareInfoPane(),this.openInfoPaneInWideView(),this.setInfoPanePosition()):this.openInMobilePanel():this.replaceContentInOpenPane(),r.$tooltip&&r.prototype.fadeOutTooltip()},prepareInfoPane:function(){this.isToggling=!0,this.setInfoPaneHeight(),this.setInfoPaneContent(),this.setinfoLinksHeight(),this.setPositionAndDisplayPane(),this.infoLinksStartWidth=this.$infoLinks.outerWidth()},replaceContentInOpenPane:function(){var t=this.$infoLinks.find("."+d["active-link"]).data("support-type"),e=this.paneOptions.scrollTo?this.$infoContent.find(this.paneOptions.scrollTo):null;this.paneOptions.type!==t?(this.setInfoPaneContent(),n.publish("infopane.showComplete")):(this.isOpen=!0,this.$component.addClass("article-support--open").removeClass("article-support--closed"),this.isToggling=!1,e&&this.scrollToTarget(e))},resizeHandler:function(){var t=this;t.isInfoPaneHidden()||t.stateWhenOpened===t.state||(t.paneOptions.duration=0,t.hideInfoPane(),setTimeout(function(){t.showInfoPane()}))},hideInfoPane:function(){this.isToggling=!0,this.$infoList.find("a").removeClass(d["active-link"]),"l"===this.state||"xl"===this.state||"xxl"===this.state?this.closeInfoPaneInWideView():this.closeInfoPaneInTabletView()},isInfoPaneHidden:function(){return this.$infoPane.hasClass(d.hidden)},isInfoPaneHiddenMobile:function(){var t=this.$info.parents("#js-article-tools").length;return!!t},getPositionLeftHiddenInfoPane:function(){return this.$info.outerWidth()-this.infoPaneWidth-this.infoLinksMarginR},setinfoLinksHeight:function(){var t=u.window.innerHeight();this.$infoLinks.height(t)},setInfoPaneHeight:function(){var t,o=e.isInViewport(u.footer),n=20,s=i.get(document).height()-u.window.scrollTop()-u.window.height();t=o?u.window.innerHeight()-(u.footer.outerHeight()-s+n):u.window.innerHeight()-this.$infoLinks.position().top-this.infoPaneMarginT-120,this.$infoContent.height(t)},setInfoPanePosition:function(){var t,o,n,s=e.isInViewport(u.footer),r=u.footer.offset().top,a=20,l=i.get(document).height()-u.window.scrollTop()-u.window.height();e.getDockHeightInViewM()&&s&&this.$infoPane.outerHeight()+this.$infoPane.outerHeight()>r-u.window.scrollTop()?(t=u.footer.outerHeight()-l+a,o="auto",n="fixed"):(t="",o="",n=""),this.$infoPane.css({bottom:t,top:o,position:n})},setInfoLinksPosition:function(){var t,o,n,s,r=e.isInViewport(u.footer),a=20,l=60,c=i.get(document).height()-u.window.scrollTop()-u.window.height();r&&(t=u.window.innerHeight(),o=u.footer.outerHeight()-c+a,n=this.$infoList.innerHeight()+l,s=t-o-n,this.$infoLinks.css({top:s<0?l+s:""}))},setInfoPaneContent:function(){this.$infoTitle.html(this.paneOptions.title),this.$infoContent.scrollable("content").empty().append(this.paneOptions.content),setTimeout(t.proxy(this.bindContentEvents,this),1),this.setActiveButton()},bindContentEvents:function(e){var i=e||this.$infoContent;i.find(".reference__title-link").on("click",t.proxy(b,this)),h.set(i)},setActiveButton:function(){this.$infoList.find("a").removeClass(d["active-link"]),this.paneOptions.elm.addClass(d["active-link"])},setPositionAndDisplayPane:function(){this.$infoPane.removeAttr("style").removeClass(d.hidden)},openInMobilePanel:function(){var e=this;"PDF_options"===e.paneOptions.type&&1===t(e.paneOptions.content).find(".box-actions ").not(".box-actions--readcube").length?e.showPDFNotificationForMobile():s.open({content:e.paneOptions.content,position:"right",title:e.paneOptions.title,scrollTo:e.paneOptions.scrollTo,onstart:function(){e.bindContentEvents(t("#js-mobile-panel"))}})},openInfoPaneInWideView:function(){var t=this;t.$infoPane.addClass("article-support__pane--transform"),t.$infoLinks.addClass("article-support__links--transform"),setTimeout(function(){n.publish("infopane.showComplete")})},closeInfoPaneInWideView:function(){var t=this;t.$infoPane.removeClass("article-support__pane--transform"),t.$infoLinks.removeClass("article-support__links--transform"),setTimeout(function(){n.publish("infopane.hideComplete"),t.setInfoLinksPosition()})},openInfoPaneInTabletView:function(){var t=this,e=t.$infoLinks.width();t.$infoPane.animate({left:e},t.paneOptions.duration,function(){n.publish("infopane.showComplete")})},closeInfoPaneInTabletView:function(){var t=this,e=t.$infoLinks.width(),i=t.$infoLinks.position().left+e-t.infoPaneWidth;t.$infoPane.animate({left:i},t.paneOptions.duration,function(){n.publish("infopane.hideComplete")})},showPDFNotificationForMobile:function(){var e,i=this.$contentPDFoptions,o=i.find(".js-article-section__pdf-container-title").text(),n=i.find(".js-article-section__pdf-container-size").text(),s=i.find(".js-article-section__pdf-container-link").attr("href"),r="",a=function(){t.colorbox.close()};r+='<div class="pdf-mobile-notification-container">',r+='<p class="pdf-mobile-notification-container__message">',r+=o+"<br />( "+n+" )",r+="</p>",r+='<button class="button button--primary js-button--cancel">Cancel</button>',r+='<button class="button button--primary js-button--ok">Ok</button>',r+="</div>",e=t(r),e.find(".button--primary").one("click",function(e){e.stopImmediatePropagation(),t(e.currentTarget).hasClass("js-button--ok")&&(document.location.href=s),a()}),t.colorbox({arrowKey:!1,closeButton:!1,escKey:!1,fixed:!0,height:161,href:e,inline:!0,onOpen:function(){t("#cboxTitle").addClass("cboxTitle--hidden")},opacity:.4,overlayClose:!1,preloading:!1,transition:"none",width:260})},setScrollbars:function(){this.$infoContent.scrollable("update")},reportingEpdf:function(e){var i=t(e).data("report-path");if(i){var o=new Image(1,1);o.src=i}},changePdfLinks:function(){var e=t(".article-support__item--pdf-solo"),i=u.html.hasClass("readcubeEpdfEnabled"),o=t(".js-readcube-pdf"),n=o.attr("href");e.length&&o.length&&i&&t(".js-infopane-cdsr").attr("href",n)}},w}),WILEY.define("modules/issue-header",["common/modules/jquery-loader"],function(t){"use strict";var e={img:"issue-header__image-link",link:"issue-header__link",hover:"issue-header--hover"},i=function(e){this.$root=t(e),this.hoverJournalLink()};return i.prototype={hoverJournalLink:function(){var t=this,i=t.$root.find("."+e.img),o=t.$root.find("."+e.link);i.add(o).hover(function(){t.$root.addClass(e.hover)},function(){t.$root.removeClass(e.hover)})}},i}),WILEY.define("modules/keyboard-hover",["common/modules/jquery-loader","common/modules/utilities","common/modules/mobile-panel","common/utilities/dom"],function(t,e,i,o){"use strict";var n={action:"click keyup touchstart",click:"click"},s={"hover-helper":"js-hover-helper","author-content":"article-header__author-content","alt-author-content":"article-header__author-content--alt","active-hover":"js-hover-active","close-infopane":"icon__infopane-close",accessible:"is-accessible"},r={close:"Close author notes"},a={body:o.get("body")},l=function(e){this.element=t(e),this.setControls(),this.element.on(n.click,".js-hover-helper, .js-hover-closer",t.proxy(this.toggleContent,this))},c=function(t){var e="";switch(t){case"icon":e+='<button type="button" class="js-hover-closer icon icon__infopane-close button__link" title="'+r.close+'">',e+='<span class="'+s.accessible+'">',e+=r.close,e+="</span>",e+="</button>"}return e},h=function(e){var i=e.data;("click"!==e.type&&"touchstart"!==e.type||t(e.target).closest("."+s["active-hover"]).length)&&27!==e.which||(i.removeClass(s["active-hover"]),a.body.off(n.action,h))};return l.prototype={openInMobilePanel:function(t){var e="<h3>"+t.find("."+s["hover-helper"]).text().replace(",","")+"</h3>",o=t.find("."+s["author-content"]).children("div").html(),n={content:e+o,position:"right",title:"Author Information"};i.open(n)},setControls:function(){this.element.find("[data-hover-control]").each(t.proxy(function(e,i){var o,n,r=t(i),a=r.attr("data-hover-control"),l=this.element.find('[data-hover-content="'+a+'"]').eq(0),h=r.closest('[data-hover-container="'+a+'"]'),d=c("icon");""!==a&&l.length&&(n=a.toLowerCase().replace(" ","-"),l.wrapInner('<div id="'+n+'"/>'),o=r.find("a, small").detach(),r.wrapInner('<button type="button" class="button__link '+s["hover-helper"]+'" />').children("."+s["hover-helper"]).data({container:h,content:l}).after(o),l.prepend(d).children("."+s["close-infopane"]).data({container:h,content:l}))},this))},toggleContent:function(i){var o=t(i.currentTarget),r=o.data("container"),l=r.find("."+s["author-content"]);if(i.preventDefault(),r.hasClass(s["active-hover"]))r.removeClass(s["active-hover"]),a.body.off(n.action,h);else{if(/extra-small/.test(e.getViewState()))return void this.openInMobilePanel(r);this.element.find(".js-hover-active .js-hover-helper").not(o).trigger(n.click),r.position().left+l.outerWidth()>r.parent().width()?l.addClass(s["alt-author-content"]):l.removeClass(s["alt-author-content"]),r.addClass(s["active-hover"]),setTimeout(function(){a.body.on(n.action,r,h)},0)}}},l}),WILEY.define("modules/language-select",["common/modules/jquery-loader","common/facades/pubsub","common/modules/utilities"],function(t,e,i){"use strict";var o={active:"tab__link--active",contents:"article-section__content",links:"language__list-link",list:"js-language__list",menu:"tab__options--active",mobile:"tab__options--mobile",options:"js-language__content"},n=function(e){this.elements={root:t(e)},this.setElements(),this.setContent(this.elements.links.first()),this.setEvents()};return n.prototype={setElements:function(){var e=this.elements.root;t.extend(this.elements,{contents:e.siblings("."+o.contents),links:e.find("."+o.links),list:e.find("."+o.list),options:e.find("."+o.options)})},setHeight:function(){this.height={max:this.elements.list.outerHeight(),min:this.elements.options.outerHeight()}},setEvents:function(){e.subscribe("state.match",t.proxy(this.setState,this)),this.elements.options.on("click","."+o.links,t.proxy(this.setAction,this))},setMenu:function(t){var e=this.elements.options.hasClass(o.menu),i=e?this.height.min:this.height.max;this.elements.options.css({height:i}).toggleClass(o.menu),e&&(this.setContent(t),t.closest("li").prependTo(this.elements.list))},setAction:function(e){var i=t(e.currentTarget),n=this.elements.options.hasClass(o.mobile)?"setMenu":"setContent";e.preventDefault(),this[n](i)},setContent:function(e){var i=t(e.attr("href"));this.elements.links.removeClass(o.active),this.elements.contents.hide(),e.addClass(o.active),i.show()},setState:function(t){var e="xxs"===t.replace("state.match.","")?"addClass":"removeClass";this.elements.options[e](o.mobile),this.setHeight()}},n}),WILEY.define("modules/main-article",["modules/figures"],function(t){"use strict";t()}),WILEY.define("modules/readcube",["common/modules/jquery-loader","common/modules/controller","common/modules/utilities","common/utilities/ie","common/utilities/services","common/utilities/device"],function(t,e,i,o,n,s){"use strict";return function(r){s.is.desktop()&&s.is.not.touch()&&!o.is(8)&&!i.isSystematicReview()&&t.ajax({url:n.readcube,success:function(i){var o=t(i);e.set(o),t(r).prepend(o).attr("displayed",!0)}})}}),WILEY.define("modules/related-articles",["common/facades/pubsub","common/modules/events","common/modules/jquery-loader","common/modules/loader","common/modules/utilities","common/utilities/ie"],function(t,e,i,o,n,s){"use strict";var r={},a={error:"is-error",section:"article-footer__section"},l={error:"Error : There seems to be a problem",exception:"URL for related articles is missing."},c=function(t){r.body.append(t)},h=function(t,e,i){var o="";o+='<p class="'+a.error+'">',o+=l.error,o+="</p>",r.body.append(o)},d=function(){var t,e=r.body.data("url");if(!e)throw l.exception;t=i.get(e),t.done(c),t.fail(h),t.always(function(){o.reset(r.body)})},u=function(){r.section=r.body.closest("."+a.section)},f=function(i){var o=i.scrollTarget;u(),o[0]===r.section[0]&&(t.unsubscribe(e.categories.footer.toggle,f),d())};return function(a){r.body=i(a),o.set(r.body),n.isAbstract()||n.isRestricted()||s.is(8)?(u(),f({scrollTarget:r.section})):t.subscribe(e.categories.footer.toggle,f)}}),WILEY.define("modules/rights-link",["common/modules/jquery-loader"],function(t){"use strict";var e={directories:"no",height:550,location:"no",menubar:"no",resizable:"yes",scrollbars:"yes",status:"no",toolbar:"no",width:650},i=function(){var t,i="";for(t in e)e.hasOwnProperty(t)&&(i+=t+"="+e[t]+",");return i},o=function(e){this.element=t(e),this.element.on("click",t.proxy(this.setWindow,this))};return o.prototype={setWindow:function(t){t.preventDefault(),window.open(this.element.attr("href"),"RightsLink",i())}},o}),WILEY.define("modules/statistics",["common/modules/jquery-loader","common/modules/modal"],function(t,e){"use strict";var i='<span class="form__error">Please ensure you accept the Terms and Conditions</span>',o=function(e){this.options={title:"Download Statistical Data",fixedPane:!1,resize:!0,size:"small",showCloseButton:!0},this.element=t(e),this.element.on("click touchstart",t.proxy(this.getContent,this))};return o.prototype={resetState:function(){this.input.attr("checked",!1),this.button.attr("disabled",!0).addClass("button--disabled"),this.form.on("submit",t.proxy(this.validate,this)),this.input.on("change",t.proxy(this.setButton,this))},getContent:function(i){i.preventDefault(),this.html?(this.resetState(),e.open(this.options)):(e.open(this.options),t.get(this.element.attr("href"),t.proxy(function(i){this.html=t(i).find("#js__ajax-fragment"),this.form=this.html.find("form"),this.hidden=this.form.find("#js__download-url"),this.input=this.form.find(".form__field--checkbox"),this.button=this.form.find("button"),this.options.html=this.html,this.resetState(),e.update(this.options)},this)))},setButton:function(){var t;this.input.is(":checked")?(t=!1,this.button.removeClass("button--disabled")):(t=!0,this.button.addClass("button--disabled")),this.button.attr("disabled",t)},validate:function(t){t.preventDefault(),this.form.find(".form__error").remove(),this.input.is(":checked")?(this.form[0].submit(),setTimeout(e.close,0)):this.input.closest(".form__row").prepend(i)}},o}),WILEY.define("modules/table",["common/modules/jquery-loader","common/facades/pubsub","common/modules/utilities","common/utilities/ie","common/facades/scrollable"],function(t,e,i,o){"use strict";var n={count:0,threshold:15,isThreshhold:function(){return n.count<=n.threshold}},s={error:"Sorry this content is only available on the full text article version."},r=(o.is(8),Modernizr.touch?"touchstart":"click"),a={analysis:"article-section--data-analyses",caption:"table__caption",cell:"table__data",chevron:"icon__double-chevron-toggle",content:"table__content--clone",clone:"table__row--clone",figure:"article-section--inline-figure",icon:"icon",image:"table__image--clone",images:"figureLink",link:"table__toggle-link",row:"table__row",sections:{article:"article-section",table:"table--article-section"},table:"table__overflow",toggle:"icon__double-chevron-toggle--expanded"},l=function(){var e={};t("#main-content").on(r,".article-section a.figureLink",function(i){i.preventDefault(),e.table=e.table||t("."+a.analysis).find("."+a.sections.table+" a.figureLink"),e.related=e.table.filter('[href="'+t(this).attr("href")+'"]').first(),t(i.currentTarget).hasClass("table__toggle-link")||e.related.trigger(r)})},c=function(t){var e="";switch(t){case"row":e+='<tr class="'+a.row+" "+a.clone+'">',e+='<td class="'+a.cell+'"></td>',e+="</tr>";break;case"icon":e+='<span class="'+a.icon+" "+a.chevron+'"></span>';break;case"header":e+="<header></header>"}return e},h=function(){this.links.length&&(this.links.one(r,t.proxy(this.setContent,this)),this.links.on(r,t.proxy(this.setDisplay,this))),e.subscribe("resizing",t.proxy(this.setWidth,this))},d=function(){var e=t(c("header")),i=this.root.find("table"),o=this.root.find("."+a.caption);o.length&&(e.attr("id",i.attr("id")),e.attr("class",o.attr("class")),e.prepend(o.html()).insertBefore(this.root),o.remove(),i.removeAttr("id")),this.links.addClass(a.link).prepend(c("icon"))},u=function(e){this.root=t(e),this.links=this.root.find("."+a.images),n.count++,d.call(this),h.call(this),n.isThreshhold()&&Modernizr.positionfixed&&this.root.scrollable({cloneX:!0,horizontal:!0,resize:!0,wheel:!1})};return u.prototype={setContent:function(e){var o=t(e.currentTarget),n=o.attr("href").split("#")[1],r=t("#"+n),l=r.clone(!0),h=t(c("row")),d=o.closest("."+a.row).children(),u=d.attr("colspan")?d.attr("colspan"):d.length;e.preventDefault(),r.find("."+a.table).length||l.addClass(a.image).width(this.getWidth()),l.length||(l=t("<span>"+s.error+"</span>")),l.addClass(a.content),r.replaceWith(i.uniqueifyHTML(r)),h.children().attr("colspan",u).append(l.hide()),h.hide().insertAfter(o.closest("."+a.row)),o.data("section",h)},setDisplay:function(e){var i=t(e.currentTarget),o=i.data("section"),s=Modernizr.touch?"toggle":"slideToggle",r=Modernizr.touch?0:250,l=function(){n.isThreshhold()&&Modernizr.positionfixed&&this.root.scrollable("update")};e.preventDefault(),o[s](r),o.find("."+a.content)[s](r,t.proxy(l,this)),i.find("."+a.icon).toggleClass(a.toggle)},getWidth:function(){return this.root.width()-40},setWidth:function(){this.root.find("."+a.image).width(this.getWidth())}},l(),u}),WILEY.define("modules/textresize",["common/modules/jquery-loader","common/modules/storage","common/modules/controller","common/modules/utilities","common/utilities/dom","common/facades/pubsub","common/facades/analytics","common/facades/ranger"],function(t,e,i,o,n,s,r){"use strict";var a={access:"is-accessible",icon:{base:"icon","control-s":"icon__letter icon__letter--small","control-l":"icon__letter icon__letter--big",tool:"icon__tool icon__tool--textsize"},input:"ranger",module:"js-module",container:"text-resize",label:"article-tools__tool-text",text:["text--xsml","text--sml","text","text--lrg","text--xlrg"],tools:{link:"article-tools__tool-link"}},l=4,c=Math.round(l/2),h=function(){return/extra-small/.test(o.getViewState())},d={body:n.get("body")},u={end:"Bigger",key:"text-size",label:"Text size",start:"Smaller"},f="",m=function(){var t=Math.floor(parseInt(f,10)/Math.round(l/a.text.length));return t},p=function(e){var i="";switch(e){case"link":i+='<a href="#'+a.container+'" ',i+='class="'+a.tools.link+" "+a.module+'" ',i+='data-module="common_overlay" ',i+='data-overlay="medium" ',i+='data-state="persist" ',i+='data-title="'+u.label+'"',i+=">",i+='<span class="'+a.icon.base+" "+a.icon.tool+'"></span>',i+='<span class="'+a.label+'">'+u.label+"</span>",i+="</a>";break;case"content":i+='<form action="#" id="'+a.container+'" class="'+a.container+" "+a.module+' overlay__content" data-module="textresize">',i+='<span class="'+a.icon.base+" "+a.icon["control-s"]+'"></span>',i+='<label for="'+a.container+"-"+a.input+'" class="'+a.access+'">'+u.label+"</label>",i+='<input id="'+a.container+"-"+a.input+'" type="range" class="'+a.input+'" name="'+u.key+'" min="1" max="'+l+'" step="1" value="'+c+'">',i+='<span class="'+a.icon.base+" "+a.icon["control-l"]+'"></span>',i+="</form>"}return t(i)},g=function(){var t=a.text[m()];d.body.removeClass(t)},v=function(){var t={0:"Extra small",1:"Small",2:"Medium",3:"Large",4:"Extra large"},e=t[m()];r.set({name:"articleTextResize",data:{articleTextSize:e}})},b=function(){var t,i=d.input?d.input.val():f;g(),f=i,t=a.text[m()],d.body.addClass(t),e.set(u.key,i)},_=function(){d.input.attr("min",h()?c:0)},w=function(){s.unsubscribe("state.unmatch.xxs",_),s.unsubscribe("state.match.xxs",_),v()},y=function(){s.subscribe("state.unmatch.xxs",_),s.subscribe("state.match.xxs",_),s.once("overlay:off",w),s.once("modal.close",w)},k=function(t){d.input=t.find("."+a.input),_(),d.input.val(f).ranger(),d.input.on("change",b),y()},x=function(t){t.preventDefault(),d.list.append(p("content"))},C=function(o){var n=e.get(u.key);d.list=t(o),d.link=p("link"),f=null===n?c:n,b(),d.link.one("click",x),i.set(d.link[0]),d.list.empty().prepend(d.link)};return function(e){e=t(e),e.is("li")?C(e):k(e)}}),WILEY.define("modules/toggle",["common/modules/jquery-loader"],function(t){"use strict";var e={off:"toggle--off"},i=function(i){var o;this.target=this.target||t(this.element.data("target")),o=this.target.hasClass(e.off)?"removeClass":"addClass",this.target[o](e.off)};return function(e){var o;this.element=t(e),o="once"===this.element.data("toggle")?"one":"on",this.element[o]("click",t.proxy(i,this))}});